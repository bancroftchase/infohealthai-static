<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CoreOne AI – General Medicine</title>
  <link rel="icon" href="public/logo-silver.png" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f5f5f5;
    }

    .wrapper {
      max-width: 420px;
      margin: 0 auto;
      height: 100vh;
      display: flex;
      flex-direction: column;
      background: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .header {
      background: #0d47a1;
      padding: 0.1rem 1rem;
      text-align: center;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .header img {
      height: 50px;
      max-width: 90%;
      object-fit: contain;
      display: block;
      margin: 0 auto;
    }

    .cards-container {
      background: #f8f9fa;
      padding: 0.5rem;
      border-bottom: 1px solid #e0e0e0;
    }

    .cards-section {
      margin-bottom: 0.4rem;
    }
    .cards-section:last-child {
      margin-bottom: 0;
    }
    .cards-section h3 {
      margin: 0 0 0.3rem 0;
      color: #333;
      font-size: 0.7rem;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.25rem;
    }
    .card {
      background: white;
      padding: 0.4rem 0.2rem;
      border-radius: 4px;
      text-align: center;
      font-size: 0.65rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
      border: 1px solid #e0e0e0;
      min-height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #333;
      line-height: 1.1;
    }

    .card:hover { 
      transform: translateY(-1px); 
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      border-color: #0d47a1;
    }

    .chat {
      flex: 1;
      padding: 0.8rem;
      overflow-y: auto;
      background: white;
    }
    .bubble-wrapper {
      display: flex;
      gap: 0.4rem;
      margin-bottom: 0.8rem;
      align-items: flex-end;
    }
    .bubble-wrapper.user {
      flex-direction: row-reverse;
    }
    .avatar img {
      width: 28px;
      height: 28px;
      border-radius: 50%;
    }
    .message {
      padding: 0.6rem 0.8rem;
      border-radius: 12px;
      max-width: 75%;
      line-height: 1.3;
      font-size: 0.9rem;
      word-wrap: break-word;
    }
    .user .message {
      background: #0d47a1;
      color: white;
    }
    .bot .message {
      background: #f8f9fa;
      color: #333;
      border: 1px solid #e0e0e0;
    }

    .input-area {
      display: flex;
      padding: 0.8rem;
      background: white;
      border-top: 1px solid #e0e0e0;
    }
    .input-area input {
      flex: 1;
      padding: 0.6rem;
      border-radius: 20px;
      border: 1px solid #e0e0e0;
      outline: none;
      font-size: 0.9rem;
    }
    .input-area input:focus {
      border-color: #0d47a1;
    }
    .input-area button {
      margin-left: 0.6rem;
      background: #0d47a1;
      color: white;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 500;
      font-size: 0.9rem;
    }

    /* Form styles */
    .form-container {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 8px;
      margin: 0.5rem 0;
      border: 1px solid #e0e0e0;
    }
    .form-container h3 {
      margin: 0 0 0.8rem 0;
      color: #333;
      font-size: 1rem;
    }
    .form-group {
      margin-bottom: 0.8rem;
    }
    .form-group label {
      display: block;
      margin-bottom: 0.3rem;
      font-weight: 500;
      color: #555;
      font-size: 0.85rem;
    }
    .form-group input, .form-group textarea, .form-group select {
      width: 100%;
      padding: 0.6rem;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      font-size: 0.9rem;
      outline: none;
    }
    .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
      border-color: #0d47a1;
    }
    .btn {
      background: #0d47a1;
      color: white;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      margin-right: 0.4rem;
      font-size: 0.85rem;
    }
    .btn-secondary {
      background: #6c757d;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="header">
      <img src="./logo-silver.png" alt="CoreOne AI Logo" style="height: 95px; max-width: 90%; object-fit: contain;">
    </div>

    <div class="cards-container">
      <div class="cards-section">
        <h3>Medical Conditions</h3>
        <div class="cards">
          <div class="card" onclick="sendMessage('What is hypertension and how is it treated?')">Hypertension</div>
          <div class="card" onclick="sendMessage('Explain high cholesterol causes and treatments')">Cholesterol</div>
          <div class="card" onclick="sendMessage('How is asthma diagnosed and managed?')">Asthma</div>
          <div class="card" onclick="sendMessage('Describe acid reflux symptoms and remedies')">Acid Reflux</div>
        </div>
      </div>

      <div class="cards-section">
        <h3>Health Management</h3>
        <div class="cards">
          <div class="card" onclick="showCalendar()">Calendar</div>
          <div class="card" onclick="showReminders()">Reminders</div>
          <div class="card" onclick="showAppointments()">Appointments</div>
          <div class="card" onclick="showProviders()">Providers</div>
        </div>
      </div>
    </div>

    <div class="chat" id="chatBox">
      <div class="bubble-wrapper bot">
        <div class="avatar"><img src="https://cdn-icons-png.flaticon.com/512/4712/4712100.png" alt="AI" /></div>
        <div class="message">Welcome to CoreOne AI General Medicine. I provide comprehensive health information for educational purposes. Always consult healthcare professionals for diagnosis and treatment.</div>
      </div>
    </div>

    <div class="input-area">
      <input type="text" id="userInput" placeholder="Ask a medical question..." />
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById('chatBox');
    const userInput = document.getElementById('userInput');
    let isProcessing = false;

    // Local Storage Functions
    function saveToLocal(key, data) {
      localStorage.setItem('coreone_' + key, JSON.stringify(data));
    }

    function getFromLocal(key) {
      const data = localStorage.getItem('coreone_' + key);
      return data ? JSON.parse(data) : [];
    }

    // Typewriter effect function
    function typeWriter(element, text, speed = 40) {
      let i = 0;
      element.innerHTML = '';
      function type() {
        if (i < text.length) {
          element.innerHTML += text.charAt(i);
          i++;
          setTimeout(type, speed);
        }
      }
      type();
    }

    // Add message with typewriter effect
    function addBubble(text, role, useTypewriter = false) {
      const wrap = document.createElement('div');
      wrap.className = `bubble-wrapper ${role}`;

      const avatar = role === 'user' 
        ? 'https://cdn-icons-png.flaticon.com/512/1946/1946429.png'
        : 'https://cdn-icons-png.flaticon.com/512/4712/4712100.png';

      wrap.innerHTML = `
        <div class="avatar"><img src="${avatar}" alt="${role}" /></div>
        <div class="message"></div>`;

      chatBox.appendChild(wrap);
      chatBox.scrollTop = chatBox.scrollHeight;

      const messageElement = wrap.querySelector('.message');

      if (useTypewriter && role === 'bot') {
        typeWriter(messageElement, text, 30);
      } else {
        messageElement.innerHTML = text;
      }
    }

    // Calendar Functions
    function showCalendar() {
      if (isProcessing) return;
      isProcessing = true;

      addBubble('Calendar', 'user');
      const calendarHTML = `
        <div class="form-container">
          <h3>My Calendar Events</h3>
          <div id="calendarList"></div>
          <div class="form-group">
            <label>Event Title:</label>
            <input type="text" id="eventTitle" placeholder="Enter event title">
          </div>
          <div class="form-group">
            <label>Date & Time:</label>
            <input type="datetime-local" id="eventDateTime">
          </div>
          <div class="form-group">
            <label>Description:</label>
            <textarea id="eventDescription" placeholder="Event description"></textarea>
          </div>
          <button class="btn" onclick="addCalendarEvent()">Add Event</button>
        </div>`;

      addBubble(calendarHTML, 'bot');
      setTimeout(() => {
        loadCalendarEvents();
        isProcessing = false;
      }, 500);
    }

    function addCalendarEvent() {
      const title = document.getElementById('eventTitle').value;
      const dateTime = document.getElementById('eventDateTime').value;
      const description = document.getElementById('eventDescription').value;

      if (title && dateTime) {
        const events = getFromLocal('calendar');
        const newEvent = {
          id: Date.now(),
          title,
          dateTime,
          description,
          created: new Date().toISOString()
        };

        events.push(newEvent);
        saveToLocal('calendar', events);

        document.getElementById('eventTitle').value = '';
        document.getElementById('eventDateTime').value = '';
        document.getElementById('eventDescription').value = '';

        addBubble('Event added successfully!', 'bot', true);
        loadCalendarEvents();
      } else {
        addBubble('Please fill in title and date/time', 'bot', true);
      }
    }

    function loadCalendarEvents() {
      const events = getFromLocal('calendar');
      const listElement = document.getElementById('calendarList');
      if (listElement) {
        listElement.innerHTML = events.map(event => `
          <div style="background: white; padding: 8px; margin: 4px 0; border-radius: 4px; border-left: 3px solid #0d47a1; font-size: 0.85rem;">
            <strong>${event.title}</strong><br>
            <small>${new Date(event.dateTime).toLocaleString()}</small><br>
            ${event.description ? `<small>${event.description}</small>` : ''}
            <button class="btn btn-secondary" style="margin-top: 4px; padding: 3px 8px; font-size: 0.75rem;" onclick="deleteCalendarEvent(${event.id})">Delete</button>
          </div>
        `).join('') || '<p style="font-size: 0.85rem;">No events yet.</p>';
      }
    }

    function deleteCalendarEvent(id) {
      const events = getFromLocal('calendar').filter(event => event.id !== id);
      saveToLocal('calendar', events);
      loadCalendarEvents();
      addBubble('Event deleted', 'bot', true);
    }

    // Reminders Functions
    function showReminders() {
      if (isProcessing) return;
      isProcessing = true;

      addBubble('Reminders', 'user');
      const remindersHTML = `
        <div class="form-container">
          <h3>My Reminders</h3>
          <div id="remindersList"></div>
          <div class="form-group">
            <label>Reminder Title:</label>
            <input type="text" id="reminderTitle" placeholder="Enter reminder">
          </div>
          <div class="form-group">
            <label>Due Date & Time:</label>
            <input type="datetime-local" id="reminderDateTime">
          </div>
          <div class="form-group">
            <label>Priority:</label>
            <select id="reminderPriority">
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
          </div>
          <button class="btn" onclick="addReminder()">Add Reminder</button>
        </div>`;

      addBubble(remindersHTML, 'bot');
      setTimeout(() => {
        loadReminders();
        isProcessing = false;
      }, 500);
    }

    function addReminder() {
      const title = document.getElementById('reminderTitle').value;
      const dateTime = document.getElementById('reminderDateTime').value;
      const priority = document.getElementById('reminderPriority').value;

      if (title && dateTime) {
        const reminders = getFromLocal('reminders');
        const newReminder = {
          id: Date.now(),
          title,
          dateTime,
          priority,
          completed: false,
          created: new Date().toISOString()
        };

        reminders.push(newReminder);
        saveToLocal('reminders', reminders);

        document.getElementById('reminderTitle').value = '';
        document.getElementById('reminderDateTime').value = '';

        addBubble('Reminder added successfully!', 'bot', true);
        loadReminders();
      } else {
        addBubble('Please fill in title and date/time', 'bot', true);
      }
    }

    function loadReminders() {
      const reminders = getFromLocal('reminders');
      const listElement = document.getElementById('remindersList');
      if (listElement) {
        listElement.innerHTML = reminders.map(reminder => {
          const priorityColor = reminder.priority === 'high' ? '#dc3545' : reminder.priority === 'medium' ? '#ffc107' : '#28a745';
          return `
            <div style="background: white; padding: 8px; margin: 4px 0; border-radius: 4px; border-left: 3px solid ${priorityColor}; font-size: 0.85rem;">
              <strong>${reminder.title}</strong><br>
              <small>${new Date(reminder.dateTime).toLocaleString()}</small><br>
              <small>Priority: ${reminder.priority.toUpperCase()}</small>
              <button class="btn btn-secondary" style="margin-top: 4px; padding: 3px 8px; font-size: 0.75rem;" onclick="deleteReminder(${reminder.id})">Delete</button>
            </div>
          `;
        }).join('') || '<p style="font-size: 0.85rem;">No reminders yet.</p>';
      }
    }

    function deleteReminder(id) {
      const reminders = getFromLocal('reminders').filter(reminder => reminder.id !== id);
      saveToLocal('reminders', reminders);
      loadReminders();
      addBubble('Reminder deleted', 'bot', true);
    }

    // Appointments Functions
    function showAppointments() {
      if (isProcessing) return;
      isProcessing = true;

      addBubble('Appointments', 'user');
      const appointmentsHTML = `
        <div class="form-container">
          <h3>My Appointments</h3>
          <div id="appointmentsList"></div>
          <div class="form-group">
            <label>Doctor/Provider:</label>
            <input type="text" id="appointmentDoctor" placeholder="Dr. Smith">
          </div>
          <div class="form-group">
            <label>Appointment Date & Time:</label>
            <input type="datetime-local" id="appointmentDateTime">
          </div>
          <div class="form-group">
            <label>Type of Visit:</label>
            <select id="appointmentType">
              <option value="checkup">Regular Checkup</option>
              <option value="followup">Follow-up</option>
              <option value="consultation">Consultation</option>
              <option value="specialist">Specialist</option>
              <option value="emergency">Emergency</option>
            </select>
          </div>
          <div class="form-group">
            <label>Notes:</label>
            <textarea id="appointmentNotes" placeholder="Any specific concerns or notes"></textarea>
          </div>
          <button class="btn" onclick="addAppointment()">Schedule Appointment</button>
        </div>`;

      addBubble(appointmentsHTML, 'bot');
      setTimeout(() => {
        loadAppointments();
        isProcessing = false;
      }, 500);
    }

    function addAppointment() {
      const doctor = document.getElementById('appointmentDoctor').value;
      const dateTime = document.getElementById('appointmentDateTime').value;
      const type = document.getElementById('appointmentType').value;
      const notes = document.getElementById('appointmentNotes').value;

      if (doctor && dateTime) {
        const appointments = getFromLocal('appointments');
        const newAppointment = {
          id: Date.now(),
          doctor,
          dateTime,
          type,
          notes,
          status: 'scheduled',
          created: new Date().toISOString()
        };

        appointments.push(newAppointment);
        saveToLocal('appointments', appointments);

        document.getElementById('appointmentDoctor').value = '';
        document.getElementById('appointmentDateTime').value = '';
        document.getElementById('appointmentNotes').value = '';

        addBubble('Appointment scheduled successfully!', 'bot', true);
        loadAppointments();
      } else {
        addBubble('Please fill in doctor and date/time', 'bot', true);
      }
    }

    function loadAppointments() {
      const appointments = getFromLocal('appointments');
      const listElement = document.getElementById('appointmentsList');
      if (listElement) {
        listElement.innerHTML = appointments.map(appointment => `
          <div style="background: white; padding: 8px; margin: 4px 0; border-radius: 4px; border-left: 3px solid #0d47a1; font-size: 0.85rem;">
            <strong>${appointment.doctor}</strong><br>
            <small>${appointment.type.toUpperCase()}</small><br>
            <small>${new Date(appointment.dateTime).toLocaleString()}</small><br>
            ${appointment.notes ? `<small>${appointment.notes}</small>` : ''}
            <button class="btn btn-secondary" style="margin-top: 4px; padding: 3px 8px; font-size: 0.75rem;" onclick="deleteAppointment(${appointment.id})">Cancel</button>
          </div>
        `).join('') || '<p style="font-size: 0.85rem;">No appointments yet.</p>';
      }
    }

    function deleteAppointment(id) {
      const appointments = getFromLocal('appointments').filter(appointment => appointment.id !== id);
      saveToLocal('appointments', appointments);
      loadAppointments();
      addBubble('Appointment cancelled', 'bot', true);
    }

    // Providers Functions
    function showProviders() {
      if (isProcessing) return;
      isProcessing = true;

      addBubble('Providers', 'user');
      const providersHTML = `
        <div class="form-container">
          <h3>My Healthcare Providers</h3>
          <div id="providersList"></div>
          <div class="form-group">
            <label>Provider Name:</label>
            <input type="text" id="providerName" placeholder="Dr. John Smith">
          </div>
          <div class="form-group">
            <label>Specialty:</label>
            <input type="text" id="providerSpecialty" placeholder="Cardiology, Family Medicine, etc.">
          </div>
          <div class="form-group">
            <label>Phone Number:</label>
            <input type="tel" id="providerPhone" placeholder="(555) 123-4567">
          </div>
          <div class="form-group">
            <label>Address:</label>
            <textarea id="providerAddress" placeholder="123 Main St, City, State"></textarea>
          </div>
          <div class="form-group">
            <label>Notes:</label>
            <textarea id="providerNotes" placeholder="Any additional notes"></textarea>
          </div>
          <button class="btn" onclick="addProvider()">Add Provider</button>
        </div>`;

      addBubble(providersHTML, 'bot');
      setTimeout(() => {
        loadProviders();
        isProcessing = false;
      }, 500);
    }

    function addProvider() {
      const name = document.getElementById('providerName').value;
      const specialty = document.getElementById('providerSpecialty').value;
      const phone = document.getElementById('providerPhone').value;
      const address = document.getElementById('providerAddress').value;
      const notes = document.getElementById('providerNotes').value;

      if (name && specialty) {
        const providers = getFromLocal('providers');
        const newProvider = {
          id: Date.now(),
          name,
          specialty,
          phone,
          address,
          notes,
          created: new Date().toISOString()
        };

        providers.push(newProvider);
        saveToLocal('providers', providers);

        document.getElementById('providerName').value = '';
        document.getElementById('providerSpecialty').value = '';
        document.getElementById('providerPhone').value = '';
        document.getElementById('providerAddress').value = '';
        document.getElementById('providerNotes').value = '';

        addBubble('Provider added successfully!', 'bot', true);
        loadProviders();
      } else {
        addBubble('Please fill in name and specialty', 'bot', true);
      }
    }

    function loadProviders() {
      const providers = getFromLocal('providers');
      const listElement = document.getElementById('providersList');
      if (listElement) {
        listElement.innerHTML = providers.map(provider => `
          <div style="background: white; padding: 8px; margin: 4px 0; border-radius: 4px; border-left: 3px solid #28a745; font-size: 0.85rem;">
            <strong>${provider.name}</strong><br>
            <small>${provider.specialty}</small><br>
            ${provider.phone ? `<small>${provider.phone}</small><br>` : ''}
            ${provider.address ? `<small>${provider.address}</small><br>` : ''}
            ${provider.notes ? `<small>${provider.notes}</small>` : ''}
            <button class="btn btn-secondary" style="margin-top: 4px; padding: 3px 8px; font-size: 0.75rem;" onclick="deleteProvider(${provider.id})">Delete</button>
          </div>
        `).join('') || '<p style="font-size: 0.85rem;">No providers yet.</p>';
      }
    }

    function deleteProvider(id) {
      const providers = getFromLocal('providers').filter(provider => provider.id !== id);
      saveToLocal('providers', providers);
      loadProviders();
      addBubble('Provider deleted', 'bot', true);
    }

    // Medical Information Responses with brief disclaimer and limited to 800 words maximum
    function getMedicalResponse(query) {
      const disclaimer = "*For educational purposes only. Consult healthcare professionals for medical advice.*\n\n";

      const responses = {
        'hypertension': `${disclaimer}**Hypertension (High Blood Pressure)**

High blood pressure affects nearly half of adults and is called the "silent killer" because it usually has no symptoms.

**Normal vs. High Readings:**
• Normal: Less than 120/80 mmHg
• Stage 1: 130-139/80-89 mmHg  
• Stage 2: 140/90 mmHg or higher

**Main Risk Factors:**
Family history, age, obesity, lack of exercise, high sodium diet, smoking, excessive alcohol, stress, diabetes

**Health Risks:**
Can lead to heart attack, stroke, heart failure, kidney disease, and vision problems

**Management:**
• DASH diet (fruits, vegetables, whole grains, lean proteins)
• Limit sodium to 2,300mg daily
• Exercise 150 minutes weekly
• Maintain healthy weight
• Limit alcohol, quit smoking
• Manage stress

**Medications:**
ACE inhibitors, diuretics, calcium channel blockers, ARBs. Many need combination therapy.

**Monitoring:**
Check blood pressure regularly at home, same time daily after 5 minutes rest.`,

        'cholesterol': `${disclaimer}**High Cholesterol**

Cholesterol is needed for cell function, but high levels increase heart disease risk.

**Types:**
• LDL "bad" cholesterol - builds up in arteries
• HDL "good" cholesterol - removes cholesterol from arteries  
• Triglycerides - blood fats that increase heart risk

**Risk Factors:**
Genetics, diet high in saturated/trans fats, lack of exercise, obesity, smoking, diabetes, age

**Health Impact:**
High LDL causes plaque buildup in arteries, leading to heart attacks and strokes

**Diet Changes:**
• Reduce saturated fats (red meat, full-fat dairy)
• Avoid trans fats (processed foods)
• Increase soluble fiber (oats, beans, apples)
• Eat fish twice weekly for omega-3s
• Choose nuts and plant sterols

**Lifestyle:**
• Exercise 150 minutes weekly
• Maintain healthy weight
• Don't smoke

**Medications:**
Statins are most common, reducing LDL by 20-60%. Other options include bile acid sequestrants and ezetimibe.

**Target Levels:**
• Total cholesterol: <200 mg/dL
• LDL: <100 mg/dL
• HDL: >40 mg/dL (men), >50 mg/dL (women)
• Triglycerides: <150 mg/dL`,

        'asthma': `${disclaimer}**Asthma**

A chronic condition where airways become inflamed and narrow, making breathing difficult.

**Symptoms:**
Wheezing, shortness of breath, chest tightness, coughing (especially at night)

**Common Triggers:**
• Allergens: pollen, dust mites, pet dander, mold
• Irritants: smoke, pollution, strong scents
• Weather changes, exercise, stress
• Respiratory infections

**Types:**
• Allergic asthma (triggered by allergens)
• Non-allergic asthma (triggered by irritants, weather, exercise)

**Diagnosis:**
Spirometry (lung function test), peak flow monitoring, allergy testing, medical history

**Treatment:**
• Controller medications: inhaled corticosteroids (daily prevention)
• Quick-relief: albuterol inhaler (for symptoms)
• Long-acting bronchodilators for persistent cases

**Management:**
• Avoid known triggers
• Use allergen-proof bedding
• Monitor peak flow daily
• Take controller medications daily, even when feeling well
• Keep rescue inhaler always available

**Emergency Warning Signs:**
Severe shortness of breath, can't speak in full sentences, blue lips, no improvement with rescue inhaler - seek immediate care.`,

        'acid reflux': `${disclaimer}**Acid Reflux (GERD)**

Stomach acid flows back into the esophagus, causing irritation and discomfort.

**How It Happens:**
The valve between esophagus and stomach weakens or relaxes inappropriately, allowing acid to escape upward.

**Risk Factors:**
Hiatal hernia, obesity, pregnancy, smoking, certain medications (NSAIDs)

**Symptoms:**
• Heartburn (burning chest sensation)
• Regurgitation of food/acid
• Difficulty swallowing
• Chronic cough, hoarseness
• Chest pain (can mimic heart attack)

**Common Triggers:**
Citrus fruits, tomatoes, chocolate, peppermint, spicy foods, fatty foods, caffeine, alcohol, carbonated drinks, large meals

**Lifestyle Changes:**
• Elevate head of bed 6-8 inches
• Don't lie down for 3 hours after eating
• Eat smaller, frequent meals
• Lose weight if overweight
• Quit smoking, limit alcohol
• Avoid personal trigger foods

**Medications:**
• Antacids (quick, temporary relief)
• H2 blockers (reduce acid 6-12 hours)
• Proton pump inhibitors (block acid 24 hours)

**When to See Doctor:**
Symptoms more than twice weekly, difficulty swallowing, weight loss, or no improvement with treatment.`,
      };

      // Check for specific conditions
      for (const [condition, response] of Object.entries(responses)) {
        if (query.toLowerCase().includes(condition) || 
            (condition === 'heart disease' && (query.toLowerCase().includes('heart') || query.toLowerCase().includes('cardiac'))) ||
            (condition === 'acid reflux' && query.toLowerCase().includes('gerd'))) {
          return response;
        }
      }

      // General health topics
      if (query.toLowerCase().includes('diet') || query.toLowerCase().includes('nutrition')) {
        return `${disclaimer}**Healthy Diet Guidelines**

• Eat variety of fruits and vegetables
• Choose whole grains over refined grains
• Include lean proteins (fish, poultry, beans, nuts)
• Limit saturated fats, trans fats, and addedsugars
• Control portion sizes
• Stay hydrated with water
• Limit sodium intake

Consult a registered dietitian for personalized nutrition advice.`;
      }

      if (query.toLowerCase().includes('exercise') || query.toLowerCase().includes('fitness')) {
        return `${disclaimer}**Exercise Guidelines**

• Adults: 150 minutes moderate aerobic activity OR 75 minutes vigorous activity weekly
• Muscle strengthening activities 2+ days per week
• Start slowly if new to exercise
• Include flexibility and balance exercises
• Listen to your body and rest when needed

Consult healthcare providers before starting new exercise programs, especially with health conditions.`;
      }

      if (query.toLowerCase().includes('weight') || query.toLowerCase().includes('obesity')) {
        return `${disclaimer}**Weight Management**

• Healthy weight loss: 1-2 pounds per week
• Focus on sustainable lifestyle changes
• Combine healthy eating with regular physical activity
• Track progress but don't obsess over daily fluctuations
• Get adequate sleep (7-9 hours for adults)
• Manage stress levels

Work with healthcare providers for personalized weight management plans.`;
      }

      if (query.toLowerCase().includes('mental health') || query.toLowerCase().includes('depression') || query.toLowerCase().includes('anxiety')) {
        return `${disclaimer}**Mental Health Information**

• Mental health is as important as physical health
• Common conditions include depression, anxiety, bipolar disorder
• Signs may include persistent sadness, worry, sleep changes, appetite changes
• Treatment options include therapy, medication, lifestyle changes
• Crisis resources: 988 Suicide & Crisis Lifeline (US)

Mental health professionals can provide proper assessment and treatment. Don't hesitate to seek help.`;
      }

      // Additional common conditions
      if (query.toLowerCase().includes('arthritis')) {
        return `${disclaimer}**Arthritis**

Arthritis affects over 50 million adults in the US, causing joint pain, stiffness, and reduced mobility.

**Types:**
Osteoarthritis (OA) is the most common type, caused by wear-and-tear of joint cartilage. It typically affects knees, hips, hands, and spine. Rheumatoid arthritis (RA) is an autoimmune condition where the immune system attacks joint linings, causing inflammation. It often affects hands, wrists, and feet symmetrically.

**Symptoms:**
Joint pain and stiffness, especially in the morning or after periods of inactivity. Swelling, tenderness, and reduced range of motion. In RA, fatigue, fever, and weight loss may occur. OA pain typically worsens with activity, while RA pain may improve with movement.

**Risk Factors:**
Age is the primary risk factor for OA. Obesity increases stress on weight-bearing joints. Previous joint injuries or repetitive joint use increase risk. Family history and genetics play roles in both types. For RA, smoking and certain infections may trigger onset.

**Diagnosis:**
Physical examination assessing joint function, swelling, and range of motion. X-rays show joint damage and cartilage loss. Blood tests for RA include rheumatoid factor and anti-CCP antibodies. MRI may be used to evaluate soft tissue damage.

**Treatment:**
Medications include NSAIDs for pain and inflammation, topical analgesics, and for RA, disease-modifying antirheumatic drugs (DMARDs) and biologics. Physical therapy maintains joint flexibility and strength. Occupational therapy helps with daily activities. Weight management reduces joint stress.

**Lifestyle Management:**
Regular low-impact exercise like swimming, cycling, and walking. Hot and cold therapy for pain relief. Joint protection techniques and assistive devices. Stress management and adequate sleep support overall health.

**Prevention:**
Maintain healthy weight, exercise regularly, avoid joint injuries, don't smoke, and eat anti-inflammatory foods rich in omega-3 fatty acids.`;
      }

      if (query.toLowerCase().includes('migraine') || query.toLowerCase().includes('headache')) {
        return `${disclaimer}**Migraine Headaches**

Migraines affect 12% of the population and are more than just severe headaches—they're a neurological condition with multiple symptoms.

**Symptoms:**
Moderate to severe throbbing pain, usually on one side of the head. Nausea and vomiting are common. Sensitivity to light (photophobia) and sound (phonophobia). Some experience aura—visual disturbances like flashing lights or blind spots that occur before the headache.

**Types:**
Migraine without aura (most common) involves headache with associated symptoms but no aura. Migraine with aura includes visual, sensory, or speech disturbances before the headache. Chronic migraine occurs 15+ days per month.

**Triggers:**
Hormonal changes (menstruation, pregnancy), certain foods (aged cheese, alcohol, chocolate, MSG), stress, sleep changes, weather changes, bright lights, strong smells, and skipped meals.

**Phases:**
Prodrome (hours to days before): mood changes, food cravings, neck stiffness. Aura (if present): visual or sensory disturbances lasting 20-60 minutes. Headache phase: throbbing pain with associated symptoms lasting 4-72 hours. Postdrome: fatigue and mood changes after headache resolves.

**Treatment:**
Acute medications include triptans (sumatriptan), NSAIDs, and anti-nausea medications. Preventive medications for frequent migraines include beta-blockers, anticonvulsants, antidepressants, and CGRP inhibitors.

**Lifestyle Management:**
Maintain regular sleep schedule, eat regular meals, stay hydrated, exercise regularly, manage stress through relaxation techniques, and identify and avoid personal triggers.

**When to Seek Care:**
Sudden, severe headache unlike any previous headache, headache with fever and neck stiffness, headache after head injury, or progressive worsening of headache pattern.`;
      }

      if (query.toLowerCase().includes('thyroid')) {
        return `${disclaimer}**Thyroid Disorders**

The thyroid gland regulates metabolism through hormone production. Disorders affect millions, particularly women.

**Hypothyroidism (Underactive Thyroid):**
Most common thyroid disorder, often caused by Hashimoto's thyroiditis (autoimmune). Symptoms include fatigue, weight gain, cold intolerance, dry skin, hair loss, constipation, depression, and memory problems. Develops gradually, often going unnoticed initially.

**Hyperthyroidism (Overactive Thyroid):**
Often caused by Graves' disease (autoimmune). Symptoms include weight loss, rapid heartbeat, anxiety, tremors, heat intolerance, sweating, frequent bowel movements, and difficulty sleeping. Can cause eye problems in Graves' disease.

**Diagnosis:**
TSH (thyroid-stimulating hormone) is the primary screening test. Low TSH suggests hyperthyroidism; high TSH suggests hypothyroidism. Free T4 and T3 levels provide additional information. Thyroid antibodies help identify autoimmune causes.

**Treatment:**
Hypothyroidism is treated with synthetic thyroid hormone (levothyroxine), usually for life. Hyperthyroidism treatments include antithyroid medications (methimazole), radioactive iodine therapy, or surgery. Beta-blockers may help control symptoms.

**Monitoring:**
Regular blood tests monitor hormone levels and medication effectiveness. Most people need lifelong treatment and monitoring. Symptoms typically improve within weeks to months of proper treatment.

**Complications:**
Untreated hypothyroidism can lead to heart problems, mental health issues, and in severe cases, myxedema coma. Untreated hyperthyroidism can cause heart problems, bone loss, and thyroid storm (medical emergency).`;
      }

      // Add more conditions and comprehensive responses
      if (query.toLowerCase().includes('diabetes')) {
        return `${disclaimer}**Diabetes**

Diabetes affects 37 million Americans and occurs when blood glucose levels remain consistently elevated due to problems with insulin production or function.

**Types of Diabetes:**
Type 1 diabetes is an autoimmune condition where the pancreas produces little or no insulin. It typically develops in childhood or adolescence but can occur at any age. Type 2 diabetes occurs when the body becomes insulin resistant or doesn't produce enough insulin. It accounts for 90-95% of cases and typically develops in adults over 45, though increasingly seen in younger people. Gestational diabetes develops during pregnancy and usually resolves after delivery but increases risk for future Type 2 diabetes.

**Risk Factors:**
Type 1 diabetes risk factors include family history, genetics, and possibly environmental triggers. Type 2 diabetes risk factors include age over 45, overweight/obesity, family history, physical inactivity, previous gestational diabetes, prediabetes, high blood pressure, abnormal cholesterol levels, and certain ethnicities (African American, Hispanic/Latino, American Indian, Pacific Islander).

**Symptoms:**
Classic symptoms include increased thirst (polydipsia), frequent urination (polyuria), unexplained weight loss, increased hunger, fatigue, blurred vision, slow-healing sores, and frequent infections. Type 1 symptoms often develop rapidly, while Type 2 symptoms may develop gradually and be subtle initially.

**Complications:**
Chronic high blood glucose damages blood vessels and nerves throughout the body. Cardiovascular disease is the leading cause of death in diabetics. Diabetic retinopathy can cause blindness. Diabetic nephropathy leads to kidney failure. Diabetic neuropathy causes nerve damage, particularly in feet, leading to ulcers and amputations. Other complications include gastroparesis, dental disease, and increased infection risk.

**Management:**
Blood glucose monitoring is essential for all diabetics. Target ranges are typically 80-130 mg/dL before meals and less than 180 mg/dL two hours after meals. Hemoglobin A1C should be less than 7% for most adults. Type 1 diabetics require insulin therapy with multiple daily injections or insulin pump. Type 2 treatment often begins with lifestyle modifications and may progress to metformin, other oral medications, injectable medications like GLP-1 agonists, or insulin.

**Lifestyle Management:**
Medical nutrition therapy focuses on consistent carbohydrate intake, portion control, and choosing nutrient-dense foods. Regular physical activity improves insulin sensitivity and glucose control. Weight management is crucial for Type 2 diabetics. Self-monitoring of blood glucose helps guide treatment decisions.

**Prevention:**
Type 1 diabetes cannot be prevented, but Type 2 diabetes can often be prevented or delayed through maintaining healthy weight, regular physical activity, healthy diet, and not smoking. Prediabetes can be reversed through lifestyle changes, preventing progression to Type 2 diabetes.`;
      }

      if (query.toLowerCase().includes('heart disease') || query.toLowerCase().includes('cardiac') || query.toLowerCase().includes('coronary')) {
        return `${disclaimer}**Heart Disease**

Heart disease remains the leading cause of death globally, encompassing various conditions affecting the heart's structure and function.

**Types of Heart Disease:**
Coronary artery disease (CAD) is the most common type, caused by atherosclerosis—plaque buildup in coronary arteries that supply blood to heart muscle. Heart failure occurs when the heart cannot pump blood effectively. Arrhythmias are abnormal heart rhythms. Valvular disease involves problems with heart valves. Congenital heart disease involves structural abnormalities present from birth.

**Risk Factors:**
Non-modifiable risk factors include age (risk increases with age), gender (men at higher risk until women reach menopause), family history, and genetics. Modifiable risk factors include smoking (increases risk 2-4 times), high blood pressure, high cholesterol, diabetes, obesity, physical inactivity, unhealthy diet, excessive alcohol consumption, and chronic stress.

**Pathophysiology:**
Atherosclerosis begins with endothelial dysfunction, allowing LDL cholesterol to penetrate artery walls. Inflammatory responses lead to plaque formation containing cholesterol, cellular debris, and fibrous material. Plaques can rupture, causing blood clots that block arteries, leading to heart attack or stroke.

**Symptoms:**
Chest pain or discomfort (angina) is the classic symptom, often described as pressure, squeezing, or burning. Pain may radiate to arms, neck, jaw, shoulder, or back. Other symptoms include shortness of breath, fatigue, nausea, sweating, dizziness, and irregular heartbeat. Women may experience atypical symptoms like jaw pain, neck pain, or extreme fatigue.

**Diagnosis:**
Electrocardiogram (ECG) records heart's electrical activity. Stress testing evaluates heart function during exercise. Echocardiogram uses ultrasound to visualize heart structure and function. Cardiac catheterization directly visualizes coronary arteries using contrast dye. Blood tests measure cardiac enzymes, cholesterol, and inflammatory markers.

**Treatment Approaches:**
Lifestyle modifications form the foundation of treatment. Medications include antiplatelet agents (aspirin), beta-blockers, ACE inhibitors, statins, and antiarrhythmic drugs. Procedures include angioplasty with stent placement to open blocked arteries, bypass surgery for severe blockages, and device implantation (pacemakers, defibrillators) for rhythm disorders.

**Prevention Strategies:**
Don't smoke or use tobacco products. Maintain healthy blood pressure (less than 120/80 mmHg). Keep cholesterol levels optimal (LDL less than 100 mg/dL). Control diabetes if present. Maintain healthy weight (BMI 18.5-24.9). Exercise regularly (150 minutes moderate intensity weekly). Eat heart-healthy diet rich in fruits, vegetables, whole grains, lean proteins, and healthy fats. Limit alcohol consumption. Manage stress through relaxation techniques, adequate sleep, and social support.

**Emergency Recognition:**
Seek immediate medical attention for chest pain or pressure, especially if accompanied by shortness of breath, sweating, nausea, or pain radiating to arms or jaw. Time is critical—"time is muscle" when it comes to heart attacks.`;
      }

      // Default response for general health queries
      return `${disclaimer}I provide comprehensive information about medical conditions and treatments up to 800 words. I can discuss:

**Common Conditions:** Hypertension, high cholesterol, asthma, acid reflux/GERD, diabetes, heart disease, arthritis, depression, anxiety, migraine, osteoporosis, thyroid disorders, and many others.

Ask me about any specific medical condition, symptom, or health topic you'd like to learn about. I provide detailed, evidence-based information while emphasizing the importance of professional medical consultation.`;
    }

    // Send message function with duplicate prevention
    async function sendMessage(preset = null) {
      if (isProcessing) return;

      const text = preset || userInput.value.trim();
      if (!text) return;

      isProcessing = true;
      addBubble(text, 'user');
      userInput.value = '';

      // Show typing indicator
      const typingElement = document.createElement('div');
      typingElement.className = 'bubble-wrapper bot typing';
      typingElement.innerHTML = `
        <div class="avatar"><img src="https://cdn-icons-png.flaticon.com/512/4712/4712100.png" alt="AI" /></div>
        <div class="message">CoreOne is thinking...</div>`;
      chatBox.appendChild(typingElement);
      chatBox.scrollTop = chatBox.scrollHeight;

      setTimeout(() => {
        chatBox.removeChild(typingElement);

        // Get medical response or general response
        let response = getMedicalResponse(text);

        if (text.toLowerCase().includes('help')) {
          response = `**CoreOne AI Help**

**Medical Information:**
• Hypertension (High Blood Pressure)
• High Cholesterol  
• Asthma
• Acid Reflux

**Health Management Tools:**
• Calendar: Track your health events
• Reminders: Set medication & appointment reminders  
• Appointments: Manage medical appointments
• Providers: Store healthcare provider information

Tap any card above or ask about specific medical conditions!`;
        } else if (text.toLowerCase().includes('thank')) {
          response = "You're welcome! I'm here to help you stay informed about your health and manage your healthcare needs. Feel free to ask about any medical conditions or use the management tools!";
        }

        addBubble(response, 'bot', true);
        isProcessing = false;
      }, 1000);
    }

    // Enter key support
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });

    // Initialize
    console.log('CoreOne app initialized with local storage');
  </script>
</body>
</html>