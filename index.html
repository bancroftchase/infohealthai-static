<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>InfoHealth AI ‚Äì General Medicine</title>
  <link rel="icon" href="infohealth-logo.png" />
  <style>
    * { box-sizing: border-box; }
    
    /* Splash Screen Styles */
    .splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 1;
      transition: opacity 1s ease-out;
    }
    
    .splash-screen.fade-out {
      opacity: 0;
      pointer-events: none;
    }
    
    .splash-logo {
      width: 200px;
      height: auto;
      margin-bottom: 20px;
      animation: logoFloat 2s ease-in-out infinite alternate;
      filter: drop-shadow(0 10px 20px rgba(218, 165, 32, 0.3));
    }
    
    .splash-title {
      color: #DAA520;
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 10px;
      text-align: center;
      text-shadow: 0 2px 10px rgba(218, 165, 32, 0.5);
      animation: titleGlow 2s ease-in-out infinite alternate;
    }
    
    .splash-subtitle {
      color: #ffffff;
      font-size: 1.1rem;
      font-weight: 300;
      text-align: center;
      margin-bottom: 40px;
      opacity: 0.9;
    }
    
    .splash-loader {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(218, 165, 32, 0.3);
      border-top: 4px solid #DAA520;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    .splash-progress {
      margin-top: 20px;
      color: #DAA520;
      font-size: 0.9rem;
      font-weight: 500;
    }
    
    @keyframes logoFloat {
      0% { transform: translateY(0px); }
      100% { transform: translateY(-10px); }
    }
    
    @keyframes titleGlow {
      0% { text-shadow: 0 2px 10px rgba(218, 165, 32, 0.5); }
      100% { text-shadow: 0 2px 20px rgba(218, 165, 32, 0.8); }
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Main App Initially Hidden */
    .main-app {
      opacity: 0;
      transition: opacity 1s ease-in;
    }
    
    .main-app.show {
      opacity: 1;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 25%, #3c3c3c 50%, #2a2a2a 75%, #000000 100%);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .mobile-frame {
      width: 100%;
      max-width: 420px;
      height: 95vh;
      max-height: 900px;
      background: linear-gradient(145deg, #000000 0%, #1a1a1a 50%, #2c2c2c 100%);
      border-radius: 35px;
      padding: 8px;
      box-shadow: 
        0 25px 50px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(255, 255, 255, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 0 30px rgba(218, 165, 32, 0.2);
      position: relative;
      overflow: hidden;
    }

    .mobile-frame::before {
      content: '';
      position: absolute;
      top: 15px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 4px;
      background: linear-gradient(90deg, #333 0%, #555 50%, #333 100%);
      border-radius: 2px;
      z-index: 10;
    }

    .wrapper {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      background: white;
      border-radius: 27px;
      overflow: hidden;
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);
    }

    .header {
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #2c2c2c 100%);
      padding: 1rem 1rem 0.5rem 1rem;
      text-align: center;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }
    
    .header img {
      height: 80px;
      max-width: 90%;
      object-fit: contain;
      display: block;
      margin: 0 auto;
      filter: drop-shadow(0 2px 8px rgba(0,0,0,0.5));
      position: relative;
      z-index: 1;
    }

    .cards-container {
      background: #f8f9fa;
      padding: 0.5rem;
      border-bottom: 2px solid #e0e0e0;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .cards-section {
      margin-bottom: 0.4rem;
      position: relative;
      border-radius: 8px;
      overflow: hidden;
      background: #f8f9fa;
    }
    
    .cards-section:last-child {
      margin-bottom: 0;
    }
    
    .cards-section h3 {
      margin: 0 0 0.3rem 0;
      color: #333;
      font-size: 0.7rem;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 0.5px;
      padding: 0.5rem;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(5px);
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.25rem;
      padding: 0 0.5rem 0.5rem 0.5rem;
    }
    .card {
      background: rgba(255,255,255,0.95);
      padding: 0.4rem 0.2rem;
      border-radius: 4px;
      text-align: center;
      font-size: 0.65rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
      border: 1px solid #e0e0e0;
      min-height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #333;
      line-height: 1.1;
      backdrop-filter: blur(5px);
    }

    .card:hover { 
      transform: translateY(-1px); 
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      border-color: #DAA520;
      background: rgba(255,255,255,1);
    }

    .chat {
      flex: 1;
      padding: 1rem !important;
      overflow-y: auto;
      background: white;
      scroll-behavior: smooth;
      display: flex;
      flex-direction: column;
    }
    .bubble-wrapper {
      display: flex;
      gap: 0.4rem;
      margin-bottom: 0.8rem;
      align-items: flex-end;
    }
    .bubble-wrapper.user {
      flex-direction: row-reverse;
    }
    .avatar img {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      object-fit: cover;
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
      padding: 2px;
      border: 1px solid rgba(218, 165, 32, 0.3);
    }
    .message {
      padding: 0.8rem 1rem;
      border-radius: 12px;
      max-width: 85%;
      line-height: 1.6;
      font-size: 0.95rem;
      word-wrap: break-word;
    }
    
    .message ul, .message ol {
      margin: 0.5rem 0;
      padding-left: 1rem;
    }
    
    .message li {
      margin-bottom: 0.2rem;
      line-height: 1.3;
    }
    
    .message p {
      margin: 0.5rem 0;
      line-height: 1.4;
    }
    
    .message strong {
      display: block;
      margin: 0.6rem 0 0.3rem 0;
      color: #DAA520;
      font-weight: 700;
      font-size: 0.95rem;
      border-bottom: 1px solid #e0e0e0;
      padding-bottom: 0.2rem;
    }
    .user .message {
      background: linear-gradient(135deg, #6B7280 0%, #4B5563 100%);
      color: white;
      box-shadow: 0 2px 8px rgba(107, 114, 128, 0.3);
    }
    .bot .message {
      background: #f8f9fa;
      color: #333;
      border: 1px solid #e0e0e0;
    }

    .input-area {
      display: flex;
      padding: 0.8rem;
      background: white;
      border-top: 1px solid #e0e0e0;
    }
    .input-area input {
      flex: 1;
      padding: 0.6rem;
      border-radius: 20px;
      border: 1px solid #e0e0e0;
      outline: none;
      font-size: 0.9rem;
    }
    .input-area input:focus {
      border-color: #DAA520;
    }
    .input-area button {
      margin-left: 0.6rem;
      background: linear-gradient(135deg, #DAA520 0%, #B8860B 100%);
      color: white;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 500;
      font-size: 0.9rem;
      box-shadow: 0 2px 8px rgba(218, 165, 32, 0.3);
    }

    .medical-image {
      max-width: 300px;
      max-height: 200px;
      width: 100%;
      height: auto;
      border-radius: 8px;
      margin: 10px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    /* Health Management Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
    }

    .modal-content {
      background-color: white;
      margin: 2% auto;
      padding: 20px;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      position: absolute;
      right: 15px;
      top: 10px;
    }

    .close:hover {
      color: #DAA520;
    }

    .modal h2 {
      color: #DAA520;
      margin-bottom: 20px;
      border-bottom: 2px solid #DAA520;
      padding-bottom: 10px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: #333;
    }

    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
    }

    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      border-color: #DAA520;
      outline: none;
    }

    .btn {
      background: linear-gradient(135deg, #DAA520 0%, #B8860B 100%);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      margin-right: 10px;
      margin-bottom: 10px;
    }

    .btn:hover {
      background: linear-gradient(135deg, #B8860B 0%, #DAA520 100%);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      margin-right: 10px;
      margin-bottom: 10px;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }

    .btn-secondary:hover {
      background: linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%);
    }

    .home-btn {
      margin-left: 0.6rem;
      background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
      color: white;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 500;
      font-size: 0.9rem;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }

    .home-btn:hover {
      background: linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%);
    }

    .health-card {
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
    }

    .health-card h4 {
      margin: 0 0 10px 0;
      color: #DAA520;
    }

    .reading-entry {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr auto;
      gap: 10px;
      align-items: center;
      padding: 10px;
      background: white;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .delete-btn {
      background: #dc3545;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
      margin-top: 15px;
    }

    .calendar-day {
      padding: 10px;
      text-align: center;
      border: 1px solid #eee;
      cursor: pointer;
      background: white;
    }

    .calendar-day:hover {
      background: #f0f8ff;
    }

    .calendar-day.selected {
      background: #DAA520;
      color: white;
    }

    .calendar-day.has-event {
      background: #e8f5e8;
      border-color: #28a745;
    }

    /* Responsive adjustments */
    @media (max-width: 450px) {
      body {
        padding: 10px;
      }
      .mobile-frame {
        max-width: 100%;
        height: 95vh;
        border-radius: 25px;
      }
      .wrapper {
        border-radius: 17px;
      }
      .modal-content {
        width: 95%;
        margin: 5% auto;
        padding: 15px;
      }
      .reading-entry {
        grid-template-columns: 1fr 1fr;
        gap: 5px;
      }
      
      .health-reading-grid {
        grid-template-columns: 1fr !important;
        gap: 10px !important;
      }
      
      .health-reading-grid input,
      .health-reading-grid select,
      .health-reading-grid button {
        width: 100%;
        margin-bottom: 10px;
      }
    }
  </style>
</head>
<body>
  <!-- Splash Screen -->
  <div class="splash-screen" id="splashScreen">
    <img src="infohealth-logo.png" alt="InfoHealth AI Logo" class="splash-logo">
    <h1 class="splash-title">InfoHealth AI</h1>
    <p class="splash-subtitle">Your Intelligent Health Companion</p>
    <div class="splash-loader"></div>
    <p class="splash-progress">Loading your health dashboard...</p>
  </div>

  <!-- Main App -->
  <div class="main-app" id="mainApp">
    <div class="mobile-frame">
    <div class="wrapper">
      <div class="header">
        <img src="infohealth-logo.png" alt="InfoHealth AI Logo" style="height: 80px; max-width: 90%; object-fit: contain;">
      </div>

      <div class="cards-container">
        <div class="cards-section" id="section1">
          <h3>Medical Conditions</h3>
          <div class="cards">
            <div class="card" onclick="sendMessageWithClear('What is hypertension and how is it treated?')">Hypertension</div>
            <div class="card" onclick="sendMessageWithClear('Explain high cholesterol causes and treatments')">Cholesterol</div>
            <div class="card" onclick="sendMessageWithClear('What is heart disease and how is it managed?')">Heart Disease</div>
            <div class="card" onclick="sendMessageWithClear('What is diabetes and how do I manage blood sugar?')">Diabetes</div>
          </div>
        </div>

        <div class="cards-section" id="section2">
          <h3>Health Management</h3>
          <div class="cards">
            <div class="card" onclick="showHealthCalendar()">Calendar</div>
            <div class="card" onclick="showMyHealthInfo()">My Info</div>
            <div class="card" onclick="showAppointments()">Appointments</div>
            <div class="card" onclick="showMedications()">Medications</div>
          </div>
        </div>
      </div>

      <div class="chat" id="chatBox">
        <!-- Chat messages will appear here -->
      </div>

      <div class="input-area">
        <input type="text" id="userInput" placeholder="Ask a medical question..." />
        <button onclick="sendMessage()">Send</button>
        <button class="home-btn" onclick="goHome()">üè† Home</button>
      </div>
    </div>
      </div>
    </div>
  </div>

  <!-- Health Management Modals -->
  
  <!-- Health Calendar Modal -->
  <div id="calendarModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('calendarModal')">&times;</span>
      <h2>üìÖ Health Calendar & Tracking</h2>
      
      <div class="form-group">
        <label>Quick Health Reading Entry:</label>
        <div class="health-reading-grid" style="display: grid; grid-template-columns: 1fr 1fr 1fr auto auto; gap: 10px;">
          <input type="text" id="readingValue" placeholder="Reading (e.g., 140/90)">
          <select id="readingType">
            <option value="Blood Pressure">Blood Pressure</option>
            <option value="Blood Sugar">Blood Sugar</option>
            <option value="Weight">Weight</option>
            <option value="Heart Rate">Heart Rate</option>
          </select>
          <input type="datetime-local" id="readingTime">
          <button class="btn" onclick="addHealthReading()">Add</button>
          <button class="btn-secondary" onclick="goHome()">üè† Home</button>
        </div>
      </div>

      <div class="health-card">
        <h4>Recent Health Readings</h4>
        <div id="healthReadings"></div>
      </div>

      <div class="health-card">
        <h4>Health Goals This Week</h4>
        <div class="form-group">
          <input type="text" id="newGoal" placeholder="Add a health goal...">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button class="btn" onclick="addHealthGoal()">Add Goal</button>
            <button class="btn-secondary" onclick="goHome()">üè† Home</button>
          </div>
        </div>
        <div id="healthGoals"></div>
      </div>
    </div>
  </div>

  <!-- My Health Info Modal -->
  <div id="healthInfoModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('healthInfoModal')">&times;</span>
      <h2>üìã My Health Information</h2>
      
      <div class="health-card">
        <h4>Personal Information</h4>
        <div class="form-group">
          <label>Full Name:</label>
          <input type="text" id="fullName" placeholder="Enter your full name">
        </div>
        <div class="form-group">
          <label>Date of Birth:</label>
          <input type="date" id="dateOfBirth">
        </div>
        <div class="form-group">
          <label>Emergency Contact:</label>
          <input type="text" id="emergencyContact" placeholder="Name and phone number">
        </div>
      </div>

      <div class="health-card">
        <h4>Medical Conditions</h4>
        <div class="form-group">
          <input type="text" id="newCondition" placeholder="Add medical condition...">
          <button class="btn" onclick="addMedicalCondition()">Add</button>
        </div>
        <div id="medicalConditions"></div>
      </div>

      <div class="health-card">
        <h4>Allergies</h4>
        <div class="form-group">
          <input type="text" id="newAllergy" placeholder="Add allergy...">
          <button class="btn" onclick="addAllergy()">Add</button>
        </div>
        <div id="allergiesList"></div>
      </div>

      <div class="health-card">
        <h4>Target Health Numbers</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
          <div class="form-group">
            <label>Blood Pressure Goal:</label>
            <input type="text" id="bpGoal" placeholder="e.g., <130/80">
          </div>
          <div class="form-group">
            <label>Cholesterol Goal:</label>
            <input type="text" id="cholesterolGoal" placeholder="e.g., LDL <100">
          </div>
          <div class="form-group">
            <label>Blood Sugar Goal:</label>
            <input type="text" id="bsGoal" placeholder="e.g., HbA1c <7%">
          </div>
          <div class="form-group">
            <label>Weight Goal:</label>
            <input type="text" id="weightGoal" placeholder="e.g., 180 lbs">
          </div>
        </div>
      </div>

      <div style="display: flex; gap: 10px; margin-top: 15px;">
        <button class="btn" onclick="saveHealthInfo()">Save Information</button>
        <button class="btn-secondary" onclick="goHome()">üè† Home</button>
      </div>
    </div>
  </div>

  <!-- Appointments Modal -->
  <div id="appointmentsModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('appointmentsModal')">&times;</span>
      <h2>üè• Medical Appointments</h2>
      
      <div class="health-card">
        <h4>Schedule New Appointment</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
          <div class="form-group">
            <label>Doctor/Clinic:</label>
            <input type="text" id="doctorName" placeholder="Dr. Smith - Cardiologist">
          </div>
          <div class="form-group">
            <label>Date & Time:</label>
            <input type="datetime-local" id="appointmentTime">
          </div>
          <div class="form-group">
            <label>Appointment Type:</label>
            <select id="appointmentType">
              <option value="Regular Checkup">Regular Checkup</option>
              <option value="Follow-up">Follow-up</option>
              <option value="Lab Work">Lab Work</option>
              <option value="Specialist">Specialist</option>
              <option value="Emergency">Emergency</option>
            </select>
          </div>
          <div class="form-group">
            <label>Phone Number:</label>
            <input type="tel" id="doctorPhone" placeholder="(555) 123-4567">
          </div>
        </div>
        <div class="form-group">
          <label>Notes/Reason:</label>
          <textarea id="appointmentNotes" placeholder="Reason for visit, questions to ask, etc."></textarea>
        </div>
        <div style="display: flex; gap: 10px; margin-top: 10px;">
          <button class="btn" onclick="addAppointment()">Schedule Appointment</button>
          <button class="btn-secondary" onclick="goHome()">üè† Home</button>
        </div>
      </div>

      <div class="health-card">
        <h4>Upcoming Appointments</h4>
        <div id="upcomingAppointments"></div>
      </div>

      <div class="health-card">
        <h4>Past Appointments</h4>
        <div id="pastAppointments"></div>
      </div>
    </div>
  </div>

  <!-- Medications Modal -->
  <div id="medicationsModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('medicationsModal')">&times;</span>
      <h2>üíä Medication Management</h2>
      
      <div class="health-card">
        <h4>Add New Medication</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
          <div class="form-group">
            <label>Medication Name:</label>
            <input type="text" id="medicationName" placeholder="Lisinopril">
          </div>
          <div class="form-group">
            <label>Dosage:</label>
            <input type="text" id="medicationDosage" placeholder="10mg">
          </div>
          <div class="form-group">
            <label>Frequency:</label>
            <select id="medicationFrequency">
              <option value="Once daily">Once daily</option>
              <option value="Twice daily">Twice daily</option>
              <option value="Three times daily">Three times daily</option>
              <option value="Four times daily">Four times daily</option>
              <option value="As needed">As needed</option>
            </select>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
          <div class="form-group">
            <label>Time to Take:</label>
            <input type="time" id="medicationTime">
          </div>
          <div class="form-group">
            <label>Prescribing Doctor:</label>
            <input type="text" id="prescribingDoctor" placeholder="Dr. Johnson">
          </div>
          <div class="form-group">
            <label>Pharmacy:</label>
            <input type="text" id="pharmacy" placeholder="CVS Pharmacy">
          </div>
        </div>
        <div class="form-group">
          <label>Notes/Instructions:</label>
          <textarea id="medicationNotes" placeholder="Take with food, side effects, etc."></textarea>
        </div>
        <div style="display: flex; gap: 10px; margin-top: 10px;">
          <button class="btn" onclick="addMedication()">Add Medication</button>
          <button class="btn-secondary" onclick="goHome()">üè† Home</button>
        </div>
      </div>

      <div class="health-card">
        <h4>Current Medications</h4>
        <div id="currentMedications"></div>
      </div>

      <div class="health-card">
        <h4>Medication Reminders</h4>
        <div id="medicationReminders">
          <p><strong>üí° Tip:</strong> Set phone alarms for your medication times!</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Splash Screen Logic
    window.addEventListener('load', function() {
      const splashScreen = document.getElementById('splashScreen');
      const mainApp = document.getElementById('mainApp');
      
      // Show splash screen for 3 seconds
      setTimeout(() => {
        splashScreen.classList.add('fade-out');
        mainApp.classList.add('show');
        
        // Remove splash screen from DOM after transition
        setTimeout(() => {
          splashScreen.style.display = 'none';
        }, 1000);
      }, 3000);
    });

    const chatBox = document.getElementById('chatBox');
    const userInput = document.getElementById('userInput');

    // Clear chat function
    function clearChat() {
      chatBox.innerHTML = '';
    }

    // Home function - clears chat and closes any open modals
    function goHome() {
      // Clear the chat
      clearChat();
      
      // Close any open modals
      const modals = document.querySelectorAll('.modal');
      modals.forEach(modal => {
        modal.style.display = 'none';
      });
      
      // Clear the input field
      userInput.value = '';
      
      // Show a clean welcome message
      setTimeout(() => {
        addBubble('üè† Welcome back to InfoHealth AI! Choose a medical condition above to learn more, or use the Health Management tools to track your health data. You can also ask me any medical questions.', 'bot', false);
      }, 100);
    }

    // Add message function with typewriter effect
    function addBubble(text, role, useTypewriter = false) {
      const wrap = document.createElement('div');
      wrap.className = 'bubble-wrapper ' + role;

      const avatar = role === 'user' 
        ? 'infohealth-user-logo.png'
        : 'infohealth-logo-small.png';

      wrap.innerHTML = '<div class="avatar"><img src="' + avatar + '" alt="' + role + '" /></div><div class="message"></div>';
      
      const messageDiv = wrap.querySelector('.message');
      chatBox.appendChild(wrap);

      // Add home button to bot responses (but not to the welcome message)
      const shouldAddHomeButton = role === 'bot' && !text.includes('üè† Welcome back');
      const finalText = shouldAddHomeButton ? text + '<br><br><div style="text-align: center; margin-top: 15px;"><button class="btn-secondary" onclick="goHome()" style="padding: 8px 16px; border-radius: 20px; font-size: 0.85rem;">üè† Back to Home</button></div>' : text;

      if (useTypewriter && role === 'bot') {
        // Typewriter effect for bot responses
        let i = 0;
        const speed = 10; // milliseconds per character
        
        function typeWriter() {
          if (i < finalText.length) {
            messageDiv.innerHTML = finalText.substring(0, i + 1);
            i++;
            setTimeout(typeWriter, speed);
            // Auto-scroll as we type
            chatBox.scrollTop = chatBox.scrollHeight;
          }
        }
        typeWriter();
      } else {
        // Instant display for user messages and welcome messages
        messageDiv.innerHTML = finalText;
        setTimeout(() => {
          chatBox.scrollTop = chatBox.scrollHeight;
        }, 100);
      }
    }

    // Conversation context tracking
    let conversationContext = {
      lastTopic: null,
      questionCount: 0,
      userInterests: []
    };

    // Enhanced smart response system
    function getSmartResponse(query) {
      const disclaimer = '<div style="background-color: #f0f8ff; border-left: 4px solid #DAA520; padding: 10px; margin-bottom: 15px; font-weight: bold; color: #2c5aa0;">‚ö†Ô∏è Consult healthcare professionals for medical advice.</div>';
      const q = query.toLowerCase();
      
      // Track conversation
      conversationContext.questionCount++;
      
      // Personal questions get personalized responses
      if (q.includes('my ') || q.includes('i have') || q.includes('should i') || q.includes('i am')) {
        return getPersonalAdvice(query, disclaimer);
      }
      
      // Detailed questions get comprehensive explanations
      if (q.includes('tell me more') || q.includes('explain') || q.includes('how does') || q.includes('why') || q.includes('what causes')) {
        return getDetailedExplanation(query, disclaimer);
      }
      
      // Symptom questions get assessment
      if (q.includes('symptom') || q.includes('feeling') || q.includes('pain') || q.includes('hurt')) {
        return getSymptomAssessment(query, disclaimer);
      }
      
      // Treatment questions get options
      if (q.includes('treat') || q.includes('help') || q.includes('medication') || q.includes('cure')) {
        return getTreatmentOptions(query, disclaimer);
      }
      
      // Default to enhanced response based on topic
      return getEnhancedTopicResponse(query, disclaimer);
    }

    // Personal advice responses
    function getPersonalAdvice(query, disclaimer) {
      const q = query.toLowerCase();
      
      if (q.includes('diabetes') || q.includes('blood sugar')) {
        return disclaimer + `<strong>üéØ PERSONALIZED DIABETES GUIDANCE</strong><br><br>
          Since you're asking about your personal situation, here's targeted advice:<br><br>
          
          <strong>If Your Blood Sugar is High (>180 mg/dL):</strong><ul>
          <li><strong>Immediate Steps:</strong> Drink water, avoid simple carbs, light walking if able</li>
          <li><strong>Check for Ketones:</strong> If >300 mg/dL, test urine ketones</li>
          <li><strong>Call Doctor If:</strong> Vomiting, severe fatigue, fruity breath smell</li>
          <li><strong>Medication Timing:</strong> Don't double-dose, follow your prescribed schedule</li></ul><br>
          
          <strong>Daily Management Strategies:</strong><ul>
          <li><strong>Meal Planning:</strong> 45-60g carbs per meal, consistent timing</li>
          <li><strong>Exercise Window:</strong> 1-3 hours after meals for best blood sugar impact</li>
          <li><strong>Stress Impact:</strong> High stress raises blood sugar - try 10-minute breathing exercises</li>
          <li><strong>Sleep Quality:</strong> Poor sleep increases insulin resistance</li></ul><br>
          
          <strong>üì± Track These Daily:</strong> Blood sugar before/after meals, medication times, physical activity, stress levels<br><br>
          
          <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin: 10px 0;">
          <strong>üí° Personal Tip:</strong> Based on your question, consider logging your patterns for 1 week to share with your doctor.
          </div>`;
      }
      
      if (q.includes('blood pressure') || q.includes('hypertension')) {
        return disclaimer + `<strong>ü©∏ YOUR BLOOD PRESSURE MANAGEMENT PLAN</strong><br><br>
          
          <strong>If Your Reading is High (>140/90):</strong><ul>
          <li><strong>Recheck Properly:</strong> Sit quietly 5 minutes, feet flat, arm supported</li>
          <li><strong>Take 2-3 Readings:</strong> 1 minute apart, average the results</li>
          <li><strong>Consider Timing:</strong> Avoid caffeine, exercise, stress before measuring</li>
          <li><strong>Emergency Signs:</strong> >180/120 with headache, chest pain, or vision changes = Call 911</li></ul><br>
          
          <strong>Immediate Lifestyle Adjustments:</strong><ul>
          <li><strong>Salt Reduction:</strong> Aim for <2300mg daily (read all food labels)</li>
          <li><strong>Walking Program:</strong> Start with 10 minutes after meals</li>
          <li><strong>Weight Management:</strong> Even 5-10 pound loss can lower BP significantly</li>
          <li><strong>Alcohol Limit:</strong> Maximum 1 drink/day (women), 2/day (men)</li></ul><br>
          
          <strong>üìä Your Monitoring Schedule:</strong><ul>
          <li><strong>Daily:</strong> Same time each morning, log results</li>
          <li><strong>Weekly:</strong> Review patterns, note triggers</li>
          <li><strong>Monthly:</strong> Share log with your doctor</li></ul>`;
      }
      
      if (q.includes('heart') || q.includes('chest') || q.includes('cardiac')) {
        return disclaimer + `<strong>‚ù§Ô∏è PERSONAL HEART HEALTH MANAGEMENT</strong><br><br>
          
          <strong>If You're Experiencing Chest Discomfort:</strong><ul>
          <li><strong>Call 911 If:</strong> Pain lasts >5 minutes, spreads to arm/jaw, with sweating/nausea</li>
          <li><strong>Monitor Closely:</strong> Brief chest tightness with exertion may be angina</li>
          <li><strong>Track Triggers:</strong> Note when symptoms occur (activity, stress, time of day)</li>
          <li><strong>Medication Response:</strong> How do symptoms respond to rest or nitroglycerin?</li></ul><br>
          
          <strong>Your Daily Heart Protection Plan:</strong><ul>
          <li><strong>Morning Routine:</strong> Take medications with first glass of water</li>
          <li><strong>Exercise Safely:</strong> Start slow, stop if chest discomfort or severe breathlessness</li>
          <li><strong>Stress Management:</strong> Practice deep breathing when you feel overwhelmed</li>
          <li><strong>Diet Focus:</strong> Limit sodium to <2000mg daily, emphasize omega-3 fatty fish</li></ul>`;
      }
      
      return disclaimer + `<strong>üéØ PERSONALIZED HEALTH GUIDANCE</strong><br><br>
        Based on your personal question, here are specific steps you can take:<br><br>
        <strong>Immediate Actions:</strong> Monitor your symptoms and track patterns<br>
        <strong>Daily Habits:</strong> Focus on medication compliance and lifestyle modifications<br>
        <strong>When to Seek Help:</strong> Contact your doctor if symptoms worsen or new concerns arise<br>
        <strong>Tracking Suggestions:</strong> Keep a daily log to share with your healthcare provider`;
    }

    // Detailed explanations
    function getDetailedExplanation(query, disclaimer) {
      const q = query.toLowerCase();
      
      if (q.includes('diabetes')) {
        return disclaimer + `<strong>üî¨ COMPREHENSIVE DIABETES EXPLANATION</strong><br><br>
          
          <strong>What Actually Happens in Your Body:</strong><br>
          Diabetes occurs when your body can't properly use glucose (sugar) for energy. Think of insulin as a "key" that unlocks your cells to let glucose in.<br><br>
          
          <strong>Type 1 Diabetes (Autoimmune):</strong><ul>
          <li><strong>The Attack:</strong> Your immune system mistakenly destroys insulin-producing beta cells in your pancreas</li>
          <li><strong>Genetic Component:</strong> Specific genes (HLA-DR, HLA-DQ) increase risk, but environment triggers it</li>
          <li><strong>Rapid Onset:</strong> Symptoms develop quickly - often weeks to months</li>
          <li><strong>No Prevention:</strong> Currently no way to prevent Type 1</li></ul><br>
          
          <strong>Type 2 Diabetes (Metabolic):</strong><ul>
          <li><strong>Insulin Resistance:</strong> Your cells become "deaf" to insulin's signals</li>
          <li><strong>Pancreas Overwork:</strong> Makes more insulin to compensate, eventually burns out</li>
          <li><strong>Progressive Disease:</strong> Develops over years, often undiagnosed for long periods</li>
          <li><strong>Lifestyle Impact:</strong> Diet, exercise, weight significantly affect progression</li></ul><br>
          
          <strong>How High Blood Sugar Damages Your Body:</strong><ul>
          <li><strong>Glycation:</strong> Glucose sticks to proteins, creating harmful compounds (AGEs)</li>
          <li><strong>Blood Vessel Damage:</strong> High glucose damages artery walls, leading to heart disease</li>
          <li><strong>Nerve Damage:</strong> High glucose disrupts nerve signals, causing neuropathy</li>
          <li><strong>Kidney Stress:</strong> Overworks filtering systems, leading to kidney disease</li></ul><br>
          
          <strong>Why Blood Sugar Swings Happen:</strong><br>
          Your blood sugar is affected by: food timing and type, physical activity, stress hormones, sleep quality, illness, and medications. Even small changes in routine can cause fluctuations.`;
      }
      
      if (q.includes('blood pressure') || q.includes('hypertension')) {
        return disclaimer + `<strong>üî¨ HOW HIGH BLOOD PRESSURE DAMAGES YOUR BODY</strong><br><br>
          
          <strong>The Mechanism of Damage:</strong><br>
          High blood pressure is called the "silent killer" because it damages organs gradually over years.<br><br>
          
          <strong>Arterial Wall Changes:</strong><ul>
          <li><strong>Endothelial Damage:</strong> High pressure creates microscopic tears in artery lining</li>
          <li><strong>Smooth Muscle Hypertrophy:</strong> Artery walls thicken to resist pressure</li>
          <li><strong>Arterial Stiffening:</strong> Loss of elastin, increased collagen deposition</li>
          <li><strong>Atherosclerosis Acceleration:</strong> Damaged areas become sites for plaque formation</li></ul><br>
          
          <strong>Heart Damage (Left Ventricular Hypertrophy):</strong><ul>
          <li><strong>Compensatory Thickening:</strong> Heart muscle grows to pump against high pressure</li>
          <li><strong>Diastolic Dysfunction:</strong> Thick heart can't relax properly between beats</li>
          <li><strong>Reduced Coronary Reserve:</strong> Thicker muscle needs more oxygen, but supply limited</li>
          <li><strong>Arrhythmia Risk:</strong> Electrical conduction changes in thick muscle</li></ul><br>
          
          <strong>Kidney Damage (Hypertensive Nephrosclerosis):</strong><ul>
          <li><strong>Afferent Arteriole Sclerosis:</strong> Small kidney arteries harden</li>
          <li><strong>Glomerular Damage:</strong> Filtering units become scarred</li>
          <li><strong>Reduced GFR:</strong> Kidney function gradually declines</li>
          <li><strong>Proteinuria:</strong> Damaged kidneys leak protein</li></ul>`;
      }
      
      return disclaimer + `<strong>üß† DETAILED MEDICAL EXPLANATION</strong><br><br>
        Here's the comprehensive science behind your question...<br><br>
        <strong>Biological Mechanisms:</strong> Understanding how your body processes work<br>
        <strong>Risk Factors:</strong> What increases your chances of developing conditions<br>
        <strong>Disease Progression:</strong> How conditions develop and worsen over time<br>
        <strong>Treatment Rationale:</strong> Why specific treatments are effective`;
    }

    // Symptom assessment
    function getSymptomAssessment(query, disclaimer) {
      return disclaimer + `<strong>ü©∫ SYMPTOM ASSESSMENT & ACTION PLAN</strong><br><br>
        
        <strong>üö® CALL 911 IMMEDIATELY IF:</strong><ul>
        <li>Chest pain lasting >5 minutes with sweating, nausea, or shortness of breath</li>
        <li>Difficulty breathing or speaking in full sentences</li>
        <li>Severe confusion, loss of consciousness, or seizures</li>
        <li>Blood sugar >400 mg/dL with vomiting or severe dehydration</li>
        <li>Blood pressure >180/120 with headache, vision changes, or chest pain</li></ul><br>
        
        <strong>üìû CALL DOCTOR SAME DAY IF:</strong><ul>
        <li>New or worsening symptoms that concern you</li>
        <li>Blood pressure consistently >160/100</li>
        <li>Blood sugar consistently >300 mg/dL</li>
        <li>Medication side effects affecting daily activities</li>
        <li>Swelling in legs, ankles, or difficulty breathing when lying flat</li></ul><br>
        
        <strong>üìÖ SCHEDULE APPOINTMENT IF:</strong><ul>
        <li>Gradual changes in energy, appetite, or sleep patterns</li>
        <li>Questions about medication effectiveness</li>
        <li>Need for preventive care or screening tests</li>
        <li>Lifestyle changes affecting your condition</li></ul><br>
        
        <strong>üìù SYMPTOM TRACKING TIPS:</strong><ul>
        <li>Note time of day, triggers, severity (1-10 scale)</li>
        <li>Track what makes symptoms better or worse</li>
        <li>Record any medication taken and response</li>
        <li>Keep log to share with healthcare provider</li></ul>`;
    }

    // Treatment options
    function getTreatmentOptions(query, disclaimer) {
      const q = query.toLowerCase();
      
      if (q.includes('diabetes')) {
        return disclaimer + `<strong>üíä DIABETES TREATMENT OPTIONS EXPLAINED</strong><br><br>
          
          <strong>Type 1 Diabetes Treatment:</strong><ul>
          <li><strong>Insulin Therapy:</strong> Essential for survival - multiple daily injections or insulin pump</li>
          <li><strong>Rapid-Acting Insulin:</strong> Taken with meals (Humalog, Novolog, Apidra)</li>
          <li><strong>Long-Acting Insulin:</strong> Provides baseline coverage (Lantus, Levemir, Tresiba)</li>
          <li><strong>Continuous Glucose Monitoring:</strong> Real-time blood sugar tracking</li></ul><br>
          
          <strong>Type 2 Diabetes Treatment Progression:</strong><ul>
          <li><strong>First-Line: Metformin</strong> - Reduces glucose production by liver</li>
          <li><strong>Second-Line: SGLT2 Inhibitors</strong> - Help kidneys remove excess glucose</li>
          <li><strong>Third-Line: GLP-1 Agonists</strong> - Slow digestion, reduce appetite</li>
          <li><strong>Insulin:</strong> Added when other medications insufficient</li></ul><br>
          
          <strong>Natural Treatment Approaches:</strong><ul>
          <li><strong>Dietary Changes:</strong> Low-carb or Mediterranean diet patterns</li>
          <li><strong>Physical Activity:</strong> 150 minutes/week moderate exercise</li>
          <li><strong>Weight Management:</strong> 5-10% weight loss can significantly improve control</li>
          <li><strong>Stress Reduction:</strong> Chronic stress raises blood sugar levels</li></ul>`;
      }
      
      return disclaimer + `<strong>üéØ TREATMENT OPTIONS OVERVIEW</strong><br><br>
        <strong>Medication Approaches:</strong> Evidence-based pharmaceutical treatments<br>
        <strong>Lifestyle Interventions:</strong> Diet, exercise, and behavior modifications<br>
        <strong>Combination Therapy:</strong> Using multiple approaches for optimal results<br>
        <strong>Alternative Options:</strong> Complementary treatments to discuss with your doctor`;
    }

    // Enhanced topic responses
    function getEnhancedTopicResponse(query, disclaimer) {
      const q = query.toLowerCase();
      
      if (q.includes('diabetes') || q.includes('blood sugar')) {
        return disclaimer + `<strong>üìä COMPREHENSIVE DIABETES INFORMATION</strong><br><br>
          Diabetes affects how your body processes glucose, the main source of energy for your cells.<br><br>
          
          <strong>Key Points to Understand:</strong><ul>
          <li><strong>Not Just About Sugar:</strong> Affects your entire cardiovascular system</li>
          <li><strong>Progressive Condition:</strong> Can worsen over time without proper management</li>
          <li><strong>Reversible Damage:</strong> Good control can prevent and even reverse some complications</li>
          <li><strong>Individual Variation:</strong> Treatment plans must be personalized</li></ul><br>
          
          <strong>What You Can Control:</strong><ul>
          <li><strong>Blood Sugar Levels:</strong> Through diet, exercise, and medications</li>
          <li><strong>Risk Factors:</strong> Weight, activity level, stress management</li>
          <li><strong>Complications:</strong> Regular monitoring and preventive care</li>
          <li><strong>Quality of Life:</strong> Many people with diabetes live completely normal lives</li></ul>`;
      }
      
      // Fall back to original comprehensive response
      return getMedicalResponse(query);
    }

    // Enhanced comprehensive medical responses with natural language processing
    function getMedicalResponse(query) {
  const disclaimer = '<div style="background-color: #f0f8ff; border-left: 4px solid #DAA520; padding: 10px; margin-bottom: 15px; font-weight: bold; color: #2c5aa0;">‚ö†Ô∏è Consult healthcare professionals for medical advice.</div>';
  const queryLower = query.toLowerCase();
  
  // HYPERTENSION / BLOOD PRESSURE QUERIES
  if (queryLower.includes('hypertension') || queryLower.includes('blood pressure') || 
      queryLower.includes('high bp') || queryLower.includes('bp is high') ||
      queryLower.includes('pressure medication') || queryLower.includes('systolic') ||
      queryLower.includes('diastolic') || queryLower.includes('lower blood pressure') ||
      queryLower.includes('reduce blood pressure') || queryLower.includes('bp medication') ||
      queryLower.includes('blood pressure natural') || queryLower.includes('bp reading') ||
      queryLower.includes('pressure check') || queryLower.includes('pressure management') ||
      queryLower.includes('ace inhibitor') || queryLower.includes('beta blocker') ||
      queryLower.includes('diuretic') || queryLower.includes('calcium channel') ||
      queryLower.includes('sodium intake') || queryLower.includes('salt') ||
      (queryLower.includes('my') && queryLower.includes('pressure') && queryLower.includes('high'))) {
    
    return disclaimer + '<img src="medical-professional-1.jpg" alt="Blood Pressure Management" class="medical-image"><br><strong>COMPREHENSIVE HYPERTENSION MANAGEMENT GUIDE</strong><br><br><strong>Blood Pressure Classification (2017 AHA/ACC Guidelines):</strong><br><br><ul><li><strong>Normal:</strong> Less than 120/80 mmHg</li><li><strong>Elevated:</strong> Systolic 120-129 AND diastolic less than 80 mmHg</li><li><strong>Stage 1 Hypertension:</strong> Systolic 130-139 OR diastolic 80-89 mmHg</li><li><strong>Stage 2 Hypertension:</strong> Systolic 140/90 mmHg or higher</li><li><strong>Hypertensive Crisis:</strong> Systolic over 180 AND/OR diastolic over 120 mmHg (EMERGENCY - Call 911)</li></ul><br><strong>Natural Ways to Lower Blood Pressure:</strong><ul><li><strong>Diet:</strong> Reduce sodium to under 2.3g daily (1 teaspoon salt)</li><li><strong>Exercise:</strong> 150 minutes moderate activity weekly (brisk walking)</li><li><strong>Weight:</strong> Lose even 5-10 pounds if overweight</li><li><strong>Stress:</strong> Deep breathing, meditation, yoga</li><li><strong>Sleep:</strong> 7-9 hours nightly, treat sleep apnea</li><li><strong>Alcohol:</strong> Limit to 1 drink/day (women), 2 drinks/day (men)</li><li><strong>Quit Smoking:</strong> Smoking immediately raises BP</li></ul><br><strong>Common Blood Pressure Medications:</strong><ul><li><strong>ACE Inhibitors:</strong> Lisinopril, enalapril (end in -pril)</li><li><strong>ARBs:</strong> Losartan, valsartan (end in -sartan)</li><li><strong>Beta Blockers:</strong> Metoprolol, atenolol (end in -lol)</li><li><strong>Calcium Channel Blockers:</strong> Amlodipine, nifedipine</li><li><strong>Diuretics:</strong> Hydrochlorothiazide (HCTZ), chlorthalidone</li></ul><br><strong>üö® WHEN TO CALL 911:</strong><ul><li>BP over 180/120 with symptoms</li><li>Severe headache with vision changes</li><li>Chest pain or shortness of breath</li><li>Numbness, weakness, trouble speaking</li><li>Severe nosebleeds with other symptoms</li></ul><br><strong>Home Monitoring Tips:</strong><ul><li>Check same time daily (morning preferred)</li><li>Sit quietly 5 minutes before measuring</li><li>Use properly sized cuff on bare arm</li><li>Take 2-3 readings, average them</li><li>Keep a log to share with your doctor</li></ul>';
  }

  // CHOLESTEROL QUERIES
  if (queryLower.includes('cholesterol') || queryLower.includes('ldl') || queryLower.includes('hdl') ||
      queryLower.includes('triglyceride') || queryLower.includes('statin') || queryLower.includes('lipid') ||
      queryLower.includes('atorvastatin') || queryLower.includes('simvastatin') || queryLower.includes('rosuvastatin') ||
      queryLower.includes('crestor') || queryLower.includes('lipitor') || queryLower.includes('zocor') ||
      queryLower.includes('cholesterol diet') || queryLower.includes('lower cholesterol') ||
      queryLower.includes('cholesterol natural') || queryLower.includes('good cholesterol') ||
      queryLower.includes('bad cholesterol') || queryLower.includes('cholesterol level') ||
      queryLower.includes('cholesterol medication') || queryLower.includes('cholesterol side effects') ||
      (queryLower.includes('my') && queryLower.includes('cholesterol') && queryLower.includes('high'))) {
    
    return disclaimer + '<img src="medical-professional-2.jpg" alt="Cholesterol Management" class="medical-image"><br><strong>COMPREHENSIVE CHOLESTEROL MANAGEMENT</strong><br><br><strong>Understanding Your Cholesterol Numbers:</strong><ul><li><strong>Total Cholesterol:</strong> Less than 200 mg/dL (Optimal)</li><li><strong>LDL ("Bad") Cholesterol:</strong> Less than 100 mg/dL (less than 70 if high risk)</li><li><strong>HDL ("Good") Cholesterol:</strong> 40+ mg/dL (men), 50+ mg/dL (women)</li><li><strong>Triglycerides:</strong> Less than 150 mg/dL</li></ul><br><strong>Natural Ways to Lower Cholesterol:</strong><ul><li><strong>Soluble Fiber:</strong> Oats, beans, apples, barley (5-10g daily)</li><li><strong>Healthy Fats:</strong> Olive oil, avocados, nuts, fatty fish</li><li><strong>Plant Sterols:</strong> Fortified foods, supplements (2g daily)</li><li><strong>Exercise:</strong> 150 minutes weekly raises HDL, lowers LDL</li><li><strong>Weight Loss:</strong> Even 5-10 pounds improves cholesterol</li><li><strong>Limit Saturated Fat:</strong> Less than 7% of daily calories</li><li><strong>Avoid Trans Fats:</strong> Check labels for "partially hydrogenated"</li></ul><br><strong>Foods That Lower Cholesterol:</strong><ul><li><strong>Oatmeal & Oat Bran:</strong> Beta-glucan fiber</li><li><strong>Nuts:</strong> Almonds, walnuts, pistachios (1 oz daily)</li><li><strong>Fatty Fish:</strong> Salmon, mackerel, sardines (2x weekly)</li><li><strong>Beans & Legumes:</strong> High soluble fiber</li><li><strong>Eggplant & Okra:</strong> Low-calorie soluble fiber</li><li><strong>Fruits:</strong> Apples, grapes, strawberries, citrus</li></ul><br><strong>Statin Medications:</strong><ul><li><strong>Common Statins:</strong> Atorvastatin (Lipitor), Simvastatin (Zocor), Rosuvastatin (Crestor)</li><li><strong>Benefits:</strong> Reduce LDL 25-50%, prevent heart attacks/strokes</li><li><strong>Side Effects:</strong> Muscle pain (5-10%), liver enzyme elevation (rare)</li><li><strong>When to Take:</strong> Usually evening (cholesterol made at night)</li><li><strong>Monitoring:</strong> Liver tests at start, then as needed</li></ul><br><strong>üö® EMERGENCY SIGNS:</strong><ul><li>Severe muscle pain with dark urine (rhabdomyolysis)</li><li>Unexplained muscle weakness</li><li>Triglycerides over 1000 mg/dL (pancreatitis risk)</li></ul><br><strong>Cholesterol Testing Schedule:</strong><ul><li><strong>Adults 20+:</strong> Every 5 years if normal</li><li><strong>High Risk:</strong> Every 6-12 months</li><li><strong>On Medication:</strong> 6-8 weeks after starting, then every 3-6 months</li></ul>';
  }

  // HEART DISEASE QUERIES
  if (queryLower.includes('heart disease') || queryLower.includes('heart attack') || queryLower.includes('cardiac') ||
      queryLower.includes('coronary') || queryLower.includes('chest pain') || queryLower.includes('angina') ||
      queryLower.includes('heart failure') || queryLower.includes('arrhythmia') || queryLower.includes('atrial fibrillation') ||
      queryLower.includes('heart healthy') || queryLower.includes('cardiovascular') || queryLower.includes('heart medication') ||
      queryLower.includes('aspirin') || queryLower.includes('blood thinner') || queryLower.includes('heart symptoms') ||
      queryLower.includes('heart prevention') || queryLower.includes('heart risk') || queryLower.includes('heart diet') ||
      queryLower.includes('heart rate') || queryLower.includes('palpitation') || queryLower.includes('shortness of breath') ||
      queryLower.includes('fatigue') || queryLower.includes('swelling') || queryLower.includes('edema') ||
      (queryLower.includes('chest') && queryLower.includes('pain')) ||
      (queryLower.includes('heart') && (queryLower.includes('hurt') || queryLower.includes('problem')))) {
    
    return disclaimer + '<img src="medical-professional-3.jpg" alt="Heart Disease Management" class="medical-image"><br><strong>COMPREHENSIVE HEART DISEASE MANAGEMENT</strong><br><br><strong>Types of Heart Disease:</strong><ul><li><strong>Coronary Artery Disease:</strong> Blocked arteries to heart muscle</li><li><strong>Heart Attack (MI):</strong> Complete blockage of heart artery</li><li><strong>Heart Failure:</strong> Heart can\'t pump effectively</li><li><strong>Arrhythmias:</strong> Irregular heart rhythms</li><li><strong>Valve Disease:</strong> Problems with heart valves</li></ul><br><strong>üö® HEART ATTACK WARNING SIGNS - CALL 911:</strong><ul><li><strong>Chest Pain:</strong> Pressure, squeezing, fullness lasting 2+ minutes</li><li><strong>Pain Spreads To:</strong> Left arm, jaw, neck, back, stomach</li><li><strong>Other Symptoms:</strong> Shortness of breath, sweating, nausea</li><li><strong>Women May Have:</strong> Fatigue, indigestion, upper back pain</li><li><strong>Time Matters:</strong> "Time is muscle" - get help immediately</li></ul><br><strong>Heart-Healthy Lifestyle:</strong><ul><li><strong>Mediterranean Diet:</strong> Olive oil, fish, fruits, vegetables, whole grains</li><li><strong>Exercise:</strong> 150 minutes moderate or 75 minutes vigorous weekly</li><li><strong>Don\'t Smoke:</strong> Smoking doubles heart disease risk</li><li><strong>Manage Stress:</strong> Meditation, deep breathing, social support</li><li><strong>Sleep Well:</strong> 7-9 hours nightly</li><li><strong>Limit Alcohol:</strong> 1 drink/day (women), 2 drinks/day (men)</li></ul><br><strong>Common Heart Medications:</strong><ul><li><strong>Aspirin:</strong> 81mg daily prevents blood clots</li><li><strong>Beta Blockers:</strong> Slow heart rate, reduce workload</li><li><strong>ACE Inhibitors:</strong> Lower blood pressure, protect heart</li><li><strong>Statins:</strong> Lower cholesterol, stabilize plaques</li><li><strong>Blood Thinners:</strong> Prevent dangerous clots</li></ul><br><strong>Heart Failure Symptoms:</strong><ul><li><strong>Shortness of Breath:</strong> Especially lying flat or with activity</li><li><strong>Fatigue:</strong> Less energy for normal activities</li><li><strong>Swelling:</strong> Feet, ankles, legs, abdomen</li><li><strong>Rapid Weight Gain:</strong> 2-3 pounds in 24 hours</li><li><strong>Persistent Cough:</strong> Especially with white/pink phlegm</li></ul><br><strong>When to Seek Emergency Care:</strong><ul><li>Any chest pain lasting over 5 minutes</li><li>Severe shortness of breath at rest</li><li>Fainting or near-fainting</li><li>Rapid heart rate over 150 with symptoms</li><li>Sudden severe swelling</li></ul>';
  }

  // DIABETES QUERIES
  if (queryLower.includes('diabetes') || queryLower.includes('blood sugar') || queryLower.includes('glucose') ||
      queryLower.includes('insulin') || queryLower.includes('diabetic') || queryLower.includes('a1c') ||
      queryLower.includes('metformin') || queryLower.includes('hypoglycemia') || queryLower.includes('hyperglycemia') ||
      queryLower.includes('type 1') || queryLower.includes('type 2') || queryLower.includes('blood glucose') ||
      queryLower.includes('sugar level') || queryLower.includes('diabetic diet') || queryLower.includes('carbs') ||
      queryLower.includes('carbohydrate') || queryLower.includes('ketoacidosis') || queryLower.includes('dka') ||
      queryLower.includes('sugar high') || queryLower.includes('sugar low') || queryLower.includes('glucose meter') ||
      queryLower.includes('blood test') || queryLower.includes('prediabetes') || queryLower.includes('gestational diabetes') ||
      (queryLower.includes('my') && queryLower.includes('sugar') && (queryLower.includes('high') || queryLower.includes('low'))) ||
      (queryLower.includes('blood') && queryLower.includes('sugar') && (queryLower.includes('control') || queryLower.includes('manage')))) {
    
    return disclaimer + '<img src="medical-professional-4.jpg" alt="Diabetes Management" class="medical-image"><br><strong>COMPREHENSIVE DIABETES MANAGEMENT GUIDE</strong><br><br><strong>Blood Sugar Target Ranges:</strong><ul><li><strong>Before Meals:</strong> 80-130 mg/dL</li><li><strong>2 Hours After Meals:</strong> Less than 180 mg/dL</li><li><strong>HbA1c Goal:</strong> Less than 7% for most adults</li><li><strong>Bedtime:</strong> 100-140 mg/dL</li></ul><br><strong>Type 1 vs Type 2 Diabetes:</strong><ul><li><strong>Type 1:</strong> Body doesn\'t make insulin (autoimmune), needs insulin shots</li><li><strong>Type 2:</strong> Body doesn\'t use insulin well, may need pills or insulin</li><li><strong>Prediabetes:</strong> Blood sugar higher than normal but not diabetic yet</li><li><strong>Gestational:</strong> Diabetes during pregnancy</li></ul><br><strong>Blood Sugar Control Tips:</strong><ul><li><strong>Check Regularly:</strong> Before meals, 2 hours after, bedtime</li><li><strong>Take Medications:</strong> As prescribed, same time daily</li><li><strong>Count Carbs:</strong> 45-60g per meal, consistent timing</li><li><strong>Exercise Daily:</strong> 30 minutes helps lower blood sugar</li><li><strong>Stay Hydrated:</strong> Drink water, avoid sugary drinks</li><li><strong>Manage Stress:</strong> Stress raises blood sugar</li></ul><br><strong>Diabetic Diet Guidelines:</strong><ul><li><strong>Choose:</strong> Whole grains, lean proteins, vegetables, fruits</li><li><strong>Limit:</strong> Refined sugars, white bread, sugary drinks</li><li><strong>Portion Control:</strong> Use plate method (¬Ω vegetables, ¬º protein, ¬º starch)</li><li><strong>Healthy Snacks:</strong> Nuts, Greek yogurt, vegetables with hummus</li><li><strong>Timing:</strong> Eat regular meals, don\'t skip</li></ul><br><strong>üö® DANGEROUS BLOOD SUGAR LEVELS:</strong><br><br><strong>Severe Low Blood Sugar (Under 54 mg/dL):</strong><ul><li><strong>Symptoms:</strong> Confusion, shakiness, sweating, fast heartbeat</li><li><strong>Treatment:</strong> 15g fast-acting carbs (4 glucose tablets, ¬Ω cup juice)</li><li><strong>Emergency:</strong> If unconscious, call 911, give glucagon if available</li></ul><br><strong>Dangerously High Blood Sugar (Over 400 mg/dL):</strong><ul><li><strong>Symptoms:</strong> Extreme thirst, frequent urination, nausea, vomiting</li><li><strong>Risk:</strong> Diabetic ketoacidosis (DKA) - life-threatening</li><li><strong>Action:</strong> Call doctor immediately, may need emergency care</li></ul><br><strong>Common Diabetes Medications:</strong><ul><li><strong>Metformin:</strong> Reduces glucose production, first-line treatment</li><li><strong>Insulin:</strong> Various types (rapid, long-acting), essential for Type 1</li><li><strong>Sulfonylureas:</strong> Stimulate insulin production</li><li><strong>SGLT2 Inhibitors:</strong> Help kidneys remove glucose</li></ul>';
  }

  // GENERAL WELLNESS & LIFESTYLE QUERIES
  if (queryLower.includes('diet') || queryLower.includes('exercise') || queryLower.includes('weight') ||
      queryLower.includes('nutrition') || queryLower.includes('healthy eating') || queryLower.includes('wellness') ||
      queryLower.includes('prevention') || queryLower.includes('lifestyle') || queryLower.includes('stress') ||
      queryLower.includes('sleep') || queryLower.includes('smoking') || queryLower.includes('alcohol')) {
    
    return disclaimer + '<strong>COMPREHENSIVE WELLNESS & PREVENTION GUIDE</strong><br><br><strong>Heart-Healthy Diet Fundamentals:</strong><ul><li><strong>Mediterranean Diet:</strong> Olive oil, fish, fruits, vegetables, whole grains, nuts</li><li><strong>DASH Diet:</strong> Low sodium, high potassium, emphasizes fruits/vegetables</li><li><strong>Limit:</strong> Saturated fat under 7%, trans fat under 1%, sodium under 2.3g daily</li><li><strong>Portion Control:</strong> Use smaller plates, eat slowly, stop when satisfied</li></ul><br><strong>Exercise Recommendations:</strong><ul><li><strong>Cardio:</strong> 150 minutes moderate or 75 minutes vigorous weekly</li><li><strong>Strength Training:</strong> 2+ days per week, all major muscle groups</li><li><strong>Flexibility:</strong> Stretching or yoga 2-3 times weekly</li><li><strong>Start Slow:</strong> If inactive, begin with 10-minute walks</li></ul><br><strong>Stress Management:</strong><ul><li><strong>Deep Breathing:</strong> 4-7-8 technique (inhale 4, hold 7, exhale 8)</li><li><strong>Meditation:</strong> 10-20 minutes daily, apps like Headspace/Calm</li><li><strong>Physical Activity:</strong> Walking, yoga, tai chi reduce stress</li><li><strong>Social Support:</strong> Connect with family/friends regularly</li></ul><br><strong>Quality Sleep Tips:</strong><ul><li><strong>Schedule:</strong> Same bedtime/wake time daily, including weekends</li><li><strong>Environment:</strong> Dark, cool (65-68¬∞F), quiet room</li><li><strong>Avoid:</strong> Caffeine 6+ hours before bed, screens 1 hour before</li><li><strong>Duration:</strong> 7-9 hours for adults</li></ul>';
  }

  // MEDICATION & DRUG INTERACTION QUERIES
  if (queryLower.includes('medication') || queryLower.includes('drug interaction') || queryLower.includes('side effect') ||
      queryLower.includes('pill') || queryLower.includes('prescription') || queryLower.includes('pharmacy') ||
      queryLower.includes('dosage') || queryLower.includes('when to take') || queryLower.includes('drug safety')) {
    
    return disclaimer + '<strong>MEDICATION SAFETY & MANAGEMENT</strong><br><br><strong>Important Drug Safety Tips:</strong><ul><li><strong>Take as Prescribed:</strong> Same time daily, don\'t skip or double doses</li><li><strong>Don\'t Stop Abruptly:</strong> Especially blood pressure and heart medications</li><li><strong>Read Labels:</strong> Check expiration dates, storage requirements</li><li><strong>Keep List Updated:</strong> Include supplements, over-the-counter medications</li></ul><br><strong>Common Drug Interactions to Avoid:</strong><ul><li><strong>Blood Thinners + NSAIDs:</strong> Increased bleeding risk</li><li><strong>ACE Inhibitors + Potassium:</strong> Dangerous high potassium levels</li><li><strong>Statins + Grapefruit:</strong> Increases medication levels</li><li><strong>Multiple Blood Pressure Meds:</strong> Risk of dangerously low pressure</li></ul><br><strong>When to Call Your Doctor:</strong><ul><li>Severe side effects or allergic reactions</li><li>New symptoms after starting medication</li><li>Want to stop or change medications</li><li>Questions about interactions with new drugs</li></ul><br><strong>Medication Organization:</strong><ul><li>Use pill organizers for daily medications</li><li>Set phone alarms for medication times</li><li>Keep emergency medications easily accessible</li><li>Store medications properly (temperature, light)</li></ul>';
  }

  // EMERGENCY & SYMPTOM QUERIES
  if (queryLower.includes('emergency') || queryLower.includes('when to call 911') || queryLower.includes('warning signs') ||
      queryLower.includes('symptoms') || queryLower.includes('urgent') || queryLower.includes('serious') ||
      queryLower.includes('dangerous') || queryLower.includes('call doctor')) {
    
    return disclaimer + '<strong>üö® MEDICAL EMERGENCY RECOGNITION</strong><br><br><strong>CALL 911 IMMEDIATELY FOR:</strong><ul><li><strong>Chest Pain:</strong> Lasting over 5 minutes, especially with sweating/nausea</li><li><strong>Stroke Signs:</strong> Face drooping, arm weakness, speech difficulty</li><li><strong>Severe Breathing Problems:</strong> Unable to speak in full sentences</li><li><strong>Severe Allergic Reaction:</strong> Swelling, difficulty breathing, hives</li><li><strong>Blood Sugar Emergencies:</strong> Unconscious diabetic, severe confusion</li></ul><br><strong>Call Your Doctor Same Day For:</strong><ul><li>Blood pressure over 180/120 without symptoms</li><li>Blood sugar consistently over 300 mg/dL</li><li>New or worsening shortness of breath</li><li>Rapid weight gain (3+ pounds in 24 hours)</li><li>Severe medication side effects</li></ul><br><strong>Monitor and Schedule Appointment For:</strong><ul><li>Gradually worsening symptoms</li><li>Questions about medication effectiveness</li><li>Need for medication adjustments</li><li>Routine follow-up care</li></ul><br><strong>Keep These Numbers Handy:</strong><ul><li>911 for emergencies</li><li>Your doctor\'s office number</li><li>24-hour nurse hotline (if available)</li><li>Poison Control: 1-800-222-1222</li></ul>';
  }

  // HEALTH CALENDAR & TRACKING QUERIES
  if (queryLower.includes('calendar') || queryLower.includes('tracking') || queryLower.includes('schedule') ||
      queryLower.includes('health tracking') || queryLower.includes('health calendar')) {
    
    return disclaimer + '<strong>üìÖ HEALTH TRACKING & CALENDAR MANAGEMENT</strong><br><br><strong>Daily Health Tracking:</strong><ul><li><strong>Blood Pressure:</strong> Same time daily (morning preferred), log readings</li><li><strong>Blood Sugar:</strong> Before meals, 2 hours after, bedtime (if diabetic)</li><li><strong>Weight:</strong> Daily, same time, same clothes (heart failure patients)</li><li><strong>Medications:</strong> Check off when taken, note any missed doses</li><li><strong>Symptoms:</strong> Rate daily (1-10 scale), note triggers</li></ul><br><strong>Weekly Health Goals:</strong><ul><li><strong>Exercise:</strong> 150 minutes moderate activity per week</li><li><strong>Meal Prep:</strong> Plan heart-healthy meals for the week</li><li><strong>Medication Review:</strong> Organize pill containers weekly</li><li><strong>Weight Trend:</strong> Calculate weekly average</li></ul><br><strong>Monthly Health Checkups:</strong><ul><li><strong>Blood Pressure Log Review:</strong> Look for patterns and trends</li><li><strong>Medication Effectiveness:</strong> Note if adjustments needed</li><li><strong>Doctor Appointments:</strong> Schedule routine follow-ups</li><li><strong>Lab Work:</strong> Schedule blood tests as recommended</li></ul><br><strong>Health Tracking Apps & Tools:</strong><ul><li><strong>Blood Pressure:</strong> AHA Check. Change. Control, Heart Habit</li><li><strong>Diabetes:</strong> MySugr, Glucose Buddy, Diabetic Connect</li><li><strong>General Health:</strong> MyFitnessPal, Apple Health, Google Fit</li><li><strong>Medication:</strong> Medisafe, MyTherapy, Round Health</li></ul>';
  }

  // PERSONAL HEALTH INFO MANAGEMENT
  if (queryLower.includes('personal health') || queryLower.includes('health information') || queryLower.includes('my info') ||
      queryLower.includes('health records') || queryLower.includes('medical history')) {
    
    return disclaimer + '<strong>üìã PERSONAL HEALTH INFORMATION MANAGEMENT</strong><br><br><strong>Essential Health Information to Track:</strong><ul><li><strong>Current Medications:</strong> Names, dosages, times taken, prescribing doctor</li><li><strong>Medical Conditions:</strong> Diagnoses, dates diagnosed, current status</li><li><strong>Allergies:</strong> Drug allergies, food allergies, reaction descriptions</li><li><strong>Emergency Contacts:</strong> Doctor numbers, family contacts, pharmacy</li><li><strong>Insurance Info:</strong> Card photos, member ID, group numbers</li></ul><br><strong>Key Health Numbers to Know:</strong><ul><li><strong>Blood Pressure Target:</strong> Your specific goal (usually under 130/80)</li><li><strong>Cholesterol Levels:</strong> Last LDL, HDL, triglyceride results</li><li><strong>HbA1c (if diabetic):</strong> Last 3-6 month average blood sugar</li><li><strong>Weight Goal:</strong> Target BMI or weight range</li><li><strong>Heart Rate Range:</strong> Resting and target exercise rates</li></ul><br><strong>Medical History Essentials:</strong><ul><li><strong>Family History:</strong> Parents/siblings with heart disease, diabetes, high BP</li><li><strong>Previous Procedures:</strong> Surgeries, cardiac procedures, hospitalizations</li><li><strong>Previous Medications:</strong> What worked, what caused side effects</li><li><strong>Baseline Tests:</strong> EKG, echocardiogram, stress test results</li></ul><br><strong>Health Information Security:</strong><ul><li><strong>Digital Copies:</strong> Photos of insurance cards, medication lists</li><li><strong>Secure Storage:</strong> Password-protected files or health apps</li><li><strong>Share Appropriately:</strong> Give copies to family members, caregivers</li><li><strong>Keep Updated:</strong> Review and update quarterly</li></ul>';
  }

  // MEDICAL APPOINTMENTS MANAGEMENT
  if (queryLower.includes('appointments') || queryLower.includes('doctor visit') || queryLower.includes('medical appointment') ||
      queryLower.includes('follow-up') || queryLower.includes('checkup')) {
    
    return disclaimer + '<strong>üè• MEDICAL APPOINTMENTS & FOLLOW-UP CARE</strong><br><br><strong>Routine Appointment Schedule:</strong><ul><li><strong>Primary Care:</strong> Every 6-12 months for chronic conditions</li><li><strong>Cardiologist:</strong> Every 3-6 months for heart disease patients</li><li><strong>Endocrinologist:</strong> Every 3-6 months for diabetes</li><li><strong>Eye Doctor:</strong> Annually for diabetics, every 2 years otherwise</li><li><strong>Dentist:</strong> Every 6 months (important for heart health)</li></ul><br><strong>Preparing for Doctor Visits:</strong><ul><li><strong>Medication List:</strong> Bring current list with dosages</li><li><strong>Symptom Log:</strong> Notes on any new or changing symptoms</li><li><strong>Question List:</strong> Write down questions beforehand</li><li><strong>Health Logs:</strong> Blood pressure, blood sugar, weight trends</li><li><strong>Insurance Card:</strong> Bring current card and ID</li></ul><br><strong>Important Lab Tests & Frequency:</strong><ul><li><strong>Blood Pressure Patients:</strong> Basic metabolic panel every 6-12 months</li><li><strong>Cholesterol:</strong> Lipid panel every 3-6 months until stable</li><li><strong>Diabetes:</strong> HbA1c every 3-6 months, annual kidney function</li><li><strong>Heart Disease:</strong> Various tests based on condition</li></ul><br><strong>After Your Appointment:</strong><ul><li><strong>Get Summary:</strong> Ask for written summary of visit</li><li><strong>Understand Instructions:</strong> Clarify any medication changes</li><li><strong>Schedule Follow-up:</strong> Book next appointment before leaving</li><li><strong>Fill Prescriptions:</strong> Get new medications promptly</li><li><strong>Follow Instructions:</strong> Implement any lifestyle changes discussed</li></ul>';
  }

  // MEDICATION MANAGEMENT
  if (queryLower.includes('medication management') || queryLower.includes('manage medications') || 
      queryLower.includes('pill organization') || queryLower.includes('medication safety') ||
      (queryLower.includes('medications') && !queryLower.includes('heart') && !queryLower.includes('diabetes'))) {
    
    return disclaimer + '<strong>üíä COMPREHENSIVE MEDICATION MANAGEMENT</strong><br><br><strong>Medication Organization System:</strong><ul><li><strong>Pill Organizers:</strong> Weekly organizers with AM/PM compartments</li><li><strong>Medication List:</strong> Keep updated list in wallet and on phone</li><li><strong>Set Reminders:</strong> Phone alarms for each medication time</li><li><strong>Refill Calendar:</strong> Mark refill dates on calendar</li><li><strong>Emergency Supply:</strong> Keep 7-day supply for emergencies</li></ul><br><strong>Safe Medication Practices:</strong><ul><li><strong>Take as Prescribed:</strong> Same time daily, don\'t skip or double doses</li><li><strong>Don\'t Stop Suddenly:</strong> Especially blood pressure and heart medications</li><li><strong>Read Labels Carefully:</strong> Check expiration dates and instructions</li><li><strong>Store Properly:</strong> Cool, dry place unless refrigeration needed</li><li><strong>Keep Original Bottles:</strong> For emergency identification</li></ul><br><strong>Critical Drug Interactions to Avoid:</strong><ul><li><strong>Blood Thinners + NSAIDs:</strong> Increases bleeding risk</li><li><strong>ACE Inhibitors + Potassium:</strong> Can cause dangerous high potassium</li><li><strong>Statins + Grapefruit:</strong> Increases medication levels</li><li><strong>Diabetes Meds + Alcohol:</strong> Risk of dangerous low blood sugar</li><li><strong>Multiple BP Meds:</strong> Can cause dangerously low blood pressure</li></ul><br><strong>When to Contact Your Doctor:</strong><ul><li><strong>Side Effects:</strong> New symptoms after starting medication</li><li><strong>Missed Doses:</strong> Unsure what to do if you miss doses</li><li><strong>Cost Issues:</strong> Can\'t afford medications</li><li><strong>Effectiveness:</strong> Medication doesn\'t seem to be working</li><li><strong>New Medications:</strong> Before starting any new drugs or supplements</li></ul><br><strong>Medication Cost-Saving Tips:</strong><ul><li><strong>Generic Options:</strong> Ask about generic versions</li><li><strong>Manufacturer Coupons:</strong> Check drug company websites</li><li><strong>Pharmacy Programs:</strong> Walmart $4 list, Costco, etc.</li><li><strong>Insurance Formulary:</strong> Choose preferred drugs when possible</li><li><strong>90-Day Supplies:</strong> Often cheaper than monthly refills</li></ul>';
  }

  // DEFAULT RESPONSE WITH SUGGESTIONS
  return disclaimer + 'I specialize in <strong>Hypertension, Cholesterol, Heart Disease, Diabetes, and Health Management</strong>.<br><br><strong>Popular Questions I Can Help With:</strong><ul><li>"My blood pressure is 150/95, what should I do?"</li><li>"How can I lower my cholesterol naturally?"</li><li>"What are the warning signs of a heart attack?"</li><li>"How do I control my blood sugar better?"</li><li>"How should I organize my medications?"</li><li>"What should I track in my health calendar?"</li><li>"How do I prepare for doctor appointments?"</li><li>"What health information should I keep?"</li><li>"When should I call 911 for chest pain?"</li><li>"Can I exercise with heart disease?"</li></ul><br><strong>Try asking about:</strong> Symptoms, medications, diet, exercise, emergency signs, natural treatments, health tracking, or appointment management.<br><br>Click the topic cards above for detailed information!';
}

// Send message with chat clearing (for card clicks)
function sendMessageWithClear(preset) {
  clearChat(); // Clear previous conversation
  sendMessage(preset);
}

// Enhanced send message function with smart vs basic responses
function sendMessage(preset) {
  const userInput = document.getElementById('userInput');
  const text = preset || (userInput ? userInput.value.trim() : '');
  if (!text) return;

  // Add user message instantly
  addBubble(text, 'user', false);
  if (userInput) userInput.value = '';

  // Add bot response with enhanced processing
  setTimeout(() => {
    let response;
    
    if (preset) {
      // Card clicks get basic overview (original responses)
      response = getMedicalResponse(text);
    } else {
      // Typed questions get smart AI-like responses
      response = getSmartResponse(text);
    }
    
    addBubble(response, 'bot', true); // Enable typewriter effect
  }, 800);
}

// Health Management System - In-Memory Storage
let healthData = {
  readings: [],
  goals: [],
  personalInfo: {},
  conditions: [],
  allergies: [],
  appointments: [],
  medications: []
};
    // Modal Management Functions
    function showHealthCalendar() {
      document.getElementById('calendarModal').style.display = 'block';
      loadHealthReadings();
      loadHealthGoals();
      document.getElementById('readingTime').value = new Date().toISOString().slice(0, 16);
    }

    function showMyHealthInfo() {
      document.getElementById('healthInfoModal').style.display = 'block';
      loadPersonalInfo();
      loadMedicalConditions();
      loadAllergies();
    }

    function showAppointments() {
      document.getElementById('appointmentsModal').style.display = 'block';
      loadAppointments();
    }

    function showMedications() {
      document.getElementById('medicationsModal').style.display = 'block';
      loadMedications();
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
      if (event.target.classList.contains('modal')) {
        event.target.style.display = 'none';
      }
    }

    // Health Calendar Functions
    function addHealthReading() {
      const value = document.getElementById('readingValue').value;
      const type = document.getElementById('readingType').value;
      const time = document.getElementById('readingTime').value;
      
      if (value && time) {
        const reading = {
          id: Date.now(),
          value: value,
          type: type,
          time: time,
          date: new Date(time).toLocaleDateString()
        };
        
        healthData.readings.push(reading);
        loadHealthReadings();
        
        // Clear form
        document.getElementById('readingValue').value = '';
        document.getElementById('readingTime').value = new Date().toISOString().slice(0, 16);
      }
    }

    function loadHealthReadings() {
      const container = document.getElementById('healthReadings');
      container.innerHTML = '';
      
      healthData.readings.slice(-10).reverse().forEach(reading => {
        const div = document.createElement('div');
        div.className = 'reading-entry';
        div.innerHTML = `
          <strong>${reading.type}</strong>
          <span>${reading.value}</span>
          <span>${reading.date}</span>
          <button class="delete-btn" onclick="deleteReading(${reading.id})">Delete</button>
        `;
        container.appendChild(div);
      });
    }

    function deleteReading(id) {
      healthData.readings = healthData.readings.filter(r => r.id !== id);
      loadHealthReadings();
    }

    function addHealthGoal() {
      const goalText = document.getElementById('newGoal').value;
      if (goalText) {
        const goal = {
          id: Date.now(),
          text: goalText,
          completed: false,
          date: new Date().toLocaleDateString()
        };
        
        healthData.goals.push(goal);
        loadHealthGoals();
        document.getElementById('newGoal').value = '';
      }
    }

    function loadHealthGoals() {
      const container = document.getElementById('healthGoals');
      container.innerHTML = '';
      
      healthData.goals.forEach(goal => {
        const div = document.createElement('div');
        div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 8px; background: white; border-radius: 6px; margin-bottom: 8px;';
        div.innerHTML = `
          <span style="${goal.completed ? 'text-decoration: line-through; color: #666;' : ''}">${goal.text}</span>
          <div>
            <button class="btn" style="padding: 5px 10px; margin-right: 5px;" onclick="toggleGoal(${goal.id})">${goal.completed ? 'Undo' : 'Complete'}</button>
            <button class="delete-btn" onclick="deleteGoal(${goal.id})">Delete</button>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function toggleGoal(id) {
      const goal = healthData.goals.find(g => g.id === id);
      if (goal) {
        goal.completed = !goal.completed;
        loadHealthGoals();
      }
    }

    function deleteGoal(id) {
      healthData.goals = healthData.goals.filter(g => g.id !== id);
      loadHealthGoals();
    }

    // Personal Health Info Functions
    function saveHealthInfo() {
      healthData.personalInfo = {
        fullName: document.getElementById('fullName').value,
        dateOfBirth: document.getElementById('dateOfBirth').value,
        emergencyContact: document.getElementById('emergencyContact').value,
        bpGoal: document.getElementById('bpGoal').value,
        cholesterolGoal: document.getElementById('cholesterolGoal').value,
        bsGoal: document.getElementById('bsGoal').value,
        weightGoal: document.getElementById('weightGoal').value
      };
      alert('Health information saved successfully!');
    }

    function loadPersonalInfo() {
      const info = healthData.personalInfo;
      document.getElementById('fullName').value = info.fullName || '';
      document.getElementById('dateOfBirth').value = info.dateOfBirth || '';
      document.getElementById('emergencyContact').value = info.emergencyContact || '';
      document.getElementById('bpGoal').value = info.bpGoal || '';
      document.getElementById('cholesterolGoal').value = info.cholesterolGoal || '';
      document.getElementById('bsGoal').value = info.bsGoal || '';
      document.getElementById('weightGoal').value = info.weightGoal || '';
    }

    function addMedicalCondition() {
      const condition = document.getElementById('newCondition').value;
      if (condition) {
        healthData.conditions.push({
          id: Date.now(),
          name: condition,
          date: new Date().toLocaleDateString()
        });
        loadMedicalConditions();
        document.getElementById('newCondition').value = '';
      }
    }

    function loadMedicalConditions() {
      const container = document.getElementById('medicalConditions');
      container.innerHTML = '';
      
      healthData.conditions.forEach(condition => {
        const div = document.createElement('div');
        div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 8px; background: white; border-radius: 6px; margin-bottom: 8px;';
        div.innerHTML = `
          <span><strong>${condition.name}</strong> <small>(Added: ${condition.date})</small></span>
          <button class="delete-btn" onclick="deleteCondition(${condition.id})">Delete</button>
        `;
        container.appendChild(div);
      });
    }

    function deleteCondition(id) {
      healthData.conditions = healthData.conditions.filter(c => c.id !== id);
      loadMedicalConditions();
    }

    function addAllergy() {
      const allergy = document.getElementById('newAllergy').value;
      if (allergy) {
        healthData.allergies.push({
          id: Date.now(),
          name: allergy,
          date: new Date().toLocaleDateString()
        });
        loadAllergies();
        document.getElementById('newAllergy').value = '';
      }
    }

    function loadAllergies() {
      const container = document.getElementById('allergiesList');
      container.innerHTML = '';
      
      healthData.allergies.forEach(allergy => {
        const div = document.createElement('div');
        div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 8px; background: white; border-radius: 6px; margin-bottom: 8px;';
        div.innerHTML = `
          <span><strong>${allergy.name}</strong> <small>(Added: ${allergy.date})</small></span>
          <button class="delete-btn" onclick="deleteAllergy(${allergy.id})">Delete</button>
        `;
        container.appendChild(div);
      });
    }

    function deleteAllergy(id) {
      healthData.allergies = healthData.allergies.filter(a => a.id !== id);
      loadAllergies();
    }

    // Appointments Functions
    function addAppointment() {
      const doctor = document.getElementById('doctorName').value;
      const time = document.getElementById('appointmentTime').value;
      const type = document.getElementById('appointmentType').value;
      const phone = document.getElementById('doctorPhone').value;
      const notes = document.getElementById('appointmentNotes').value;
      
      if (doctor && time) {
        const appointment = {
          id: Date.now(),
          doctor: doctor,
          time: time,
          type: type,
          phone: phone,
          notes: notes,
          date: new Date(time).toLocaleDateString(),
          isPast: new Date(time) < new Date()
        };
        
        healthData.appointments.push(appointment);
        loadAppointments();
        
        // Clear form
        document.getElementById('doctorName').value = '';
        document.getElementById('appointmentTime').value = '';
        document.getElementById('doctorPhone').value = '';
        document.getElementById('appointmentNotes').value = '';
      }
    }

    function loadAppointments() {
      const upcomingContainer = document.getElementById('upcomingAppointments');
      const pastContainer = document.getElementById('pastAppointments');
      
      upcomingContainer.innerHTML = '';
      pastContainer.innerHTML = '';
      
      const now = new Date();
      
      healthData.appointments.forEach(appointment => {
        const appointmentDate = new Date(appointment.time);
        const isUpcoming = appointmentDate >= now;
        
        const div = document.createElement('div');
        div.className = 'health-card';
        div.style.cssText = 'background: white; margin-bottom: 10px;';
        div.innerHTML = `
          <h4 style="margin: 0 0 10px 0; color: ${isUpcoming ? '#DAA520' : '#666'};">${appointment.doctor}</h4>
          <p><strong>Date:</strong> ${new Date(appointment.time).toLocaleString()}</p>
          <p><strong>Type:</strong> ${appointment.type}</p>
          ${appointment.phone ? `<p><strong>Phone:</strong> ${appointment.phone}</p>` : ''}
          ${appointment.notes ? `<p><strong>Notes:</strong> ${appointment.notes}</p>` : ''}
          <button class="delete-btn" onclick="deleteAppointment(${appointment.id})">Delete</button>
        `;
        
        if (isUpcoming) {
          upcomingContainer.appendChild(div);
        } else {
          pastContainer.appendChild(div);
        }
      });
      
      if (upcomingContainer.children.length === 0) {
        upcomingContainer.innerHTML = '<p>No upcoming appointments scheduled.</p>';
      }
      
      if (pastContainer.children.length === 0) {
        pastContainer.innerHTML = '<p>No past appointments recorded.</p>';
      }
    }

    function deleteAppointment(id) {
      healthData.appointments = healthData.appointments.filter(a => a.id !== id);
      loadAppointments();
    }

    // Medications Functions
    function addMedication() {
      const name = document.getElementById('medicationName').value;
      const dosage = document.getElementById('medicationDosage').value;
      const frequency = document.getElementById('medicationFrequency').value;
      const time = document.getElementById('medicationTime').value;
      const doctor = document.getElementById('prescribingDoctor').value;
      const pharmacy = document.getElementById('pharmacy').value;
      const notes = document.getElementById('medicationNotes').value;
      
      if (name && dosage) {
        const medication = {
          id: Date.now(),
          name: name,
          dosage: dosage,
          frequency: frequency,
          time: time,
          doctor: doctor,
          pharmacy: pharmacy,
          notes: notes,
          dateAdded: new Date().toLocaleDateString()
        };
        
        healthData.medications.push(medication);
        loadMedications();
        
        // Clear form
        document.getElementById('medicationName').value = '';
        document.getElementById('medicationDosage').value = '';
        document.getElementById('medicationTime').value = '';
        document.getElementById('prescribingDoctor').value = '';
        document.getElementById('pharmacy').value = '';
        document.getElementById('medicationNotes').value = '';
      }
    }

    function loadMedications() {
      const container = document.getElementById('currentMedications');
      container.innerHTML = '';
      
      healthData.medications.forEach(medication => {
        const div = document.createElement('div');
        div.className = 'health-card';
        div.style.cssText = 'background: white; margin-bottom: 10px;';
        div.innerHTML = `
          <h4 style="margin: 0 0 10px 0; color: #DAA520;">${medication.name} ${medication.dosage}</h4>
          <p><strong>Frequency:</strong> ${medication.frequency}</p>
          ${medication.time ? `<p><strong>Time to Take:</strong> ${medication.time}</p>` : ''}
          ${medication.doctor ? `<p><strong>Prescribed by:</strong> ${medication.doctor}</p>` : ''}
          ${medication.pharmacy ? `<p><strong>Pharmacy:</strong> ${medication.pharmacy}</p>` : ''}
          ${medication.notes ? `<p><strong>Notes:</strong> ${medication.notes}</p>` : ''}
          <p><small>Added: ${medication.dateAdded}</small></p>
          <button class="delete-btn" onclick="deleteMedication(${medication.id})">Delete</button>
        `;
        container.appendChild(div);
      });
      
      if (healthData.medications.length === 0) {
        container.innerHTML = '<p>No medications added yet.</p>';
      }
    }

    function deleteMedication(id) {
      healthData.medications = healthData.medications.filter(m => m.id !== id);
      loadMedications();
    }

    // Enter key support
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });
  </script>
</body>
</html>